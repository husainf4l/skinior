{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/ConnectionManager.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport {\n  VideoCameraIcon,\n  ExclamationTriangleIcon,\n  VideoCameraSlashIcon,\n  MicrophoneIcon,\n} from \"@heroicons/react/24/outline\";\n\ninterface ConnectionManagerProps {\n  needsPermission: boolean;\n  error: string | null;\n  isConnecting: boolean;\n  isConnected: boolean;\n  onStartInterview: () => void;\n}\n\nconst PageWrapper = ({\n  children,\n  title,\n  description,\n}: {\n  children: React.ReactNode;\n  title: string;\n  description: string;\n}) => (\n  <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden\">\n    <div className=\"relative z-10 w-full max-w-5xl text-center\">\n      <div className=\"bg-white/95 backdrop-blur-2xl rounded-2xl sm:rounded-3xl shadow-2xl border border-white/30 p-4 sm:p-8 lg:p-12 animate-in slide-in-from-bottom-4 duration-500\">\n        {children}\n        <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900 mb-3 mt-6 sm:mt-8 font-display tracking-tight\">\n          {title}\n        </h2>\n        <p className=\"text-sm sm:text-base text-gray-600 mb-6 sm:mb-8 font-text leading-relaxed max-w-2xl mx-auto\">\n          {description}\n        </p>\n      </div>\n    </div>\n  </div>\n);\n\nconst PrimaryButton = ({\n  onClick,\n  children,\n}: {\n  onClick: () => void;\n  children: React.ReactNode;\n}) => (\n  <button\n    onClick={onClick}\n    className=\"w-full bg-gradient-to-r from-[#13ead9] to-[#0891b2] hover:from-[#0891b2] hover:to-[#13ead9] text-white px-4 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-2xl font-semibold text-base sm:text-lg transition-all duration-300 transform active:scale-95 sm:hover:scale-105 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-[#13ead9] focus:ring-offset-2\"\n  >\n    {children}\n  </button>\n);\n\nexport function ConnectionManager({\n  needsPermission,\n  error,\n  isConnecting,\n  isConnected,\n  onStartInterview,\n}: ConnectionManagerProps) {\n  const [consentGiven, setConsentGiven] = useState(false);\n  const [micTested, setMicTested] = useState(false);\n  const [videoTested, setVideoTested] = useState(false);\n  const [isAutoTesting, setIsAutoTesting] = useState(false);\n  const [micLevel, setMicLevel] = useState(0);\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [audioContext, setAudioContext] = useState<AudioContext | null>(null);\n  const [cameraError, setCameraError] = useState<string | null>(null);\n  const [micError, setMicError] = useState<string | null>(null);\n  const [isStartingInterview, setIsStartingInterview] = useState(false);\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  // Cleanup function\n  const cleanup = () => {\n    if (stream) {\n      stream.getTracks().forEach((track) => track.stop());\n    }\n    if (audioContext) {\n      audioContext.close();\n    }\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n  };\n\n  // Auto test both camera and microphone\n  const autoTestDevices = async () => {\n    setIsAutoTesting(true);\n    setCameraError(null);\n    setMicError(null);\n\n    try {\n      // Test both camera and microphone together\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      });\n\n      // Setup video\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n        await videoRef.current.play();\n      }\n      setVideoTested(true);\n\n      // Setup audio monitoring\n      const audioCtx = new (window.AudioContext ||\n        (window as unknown as { webkitAudioContext: typeof AudioContext })\n          .webkitAudioContext)();\n      const analyserNode = audioCtx.createAnalyser();\n      const source = audioCtx.createMediaStreamSource(mediaStream);\n\n      analyserNode.fftSize = 256;\n      source.connect(analyserNode);\n\n      setAudioContext(audioCtx);\n      setStream(mediaStream);\n\n      const dataArray = new Uint8Array(analyserNode.frequencyBinCount);\n\n      const updateMicLevel = () => {\n        analyserNode.getByteFrequencyData(dataArray);\n        const average = dataArray.reduce((a, b) => a + b) / dataArray.length;\n        setMicLevel(Math.min(100, (average / 128) * 100));\n\n        if (isAutoTesting) {\n          animationFrameRef.current = requestAnimationFrame(updateMicLevel);\n        }\n      };\n\n      updateMicLevel();\n\n      // Auto-complete mic test after 3 seconds\n      setTimeout(() => {\n        setMicTested(true);\n        setIsAutoTesting(false);\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n        }\n      }, 3000);\n    } catch (err: unknown) {\n      const error = err as Error & { name?: string };\n      console.error(\"Error accessing media devices:\", err);\n      setIsAutoTesting(false);\n\n      let errorMessage = \"Camera/Microphone access failed\";\n      if (error.name === \"NotFoundError\") {\n        errorMessage =\n          \"No camera or microphone found. Please connect devices and try again.\";\n      } else if (error.name === \"NotAllowedError\") {\n        errorMessage =\n          \"Camera/Microphone access denied. Please allow permissions and try again.\";\n      } else if (error.name === \"NotReadableError\") {\n        errorMessage =\n          \"Camera/Microphone is being used by another application.\";\n      }\n\n      setCameraError(errorMessage);\n      setMicError(errorMessage);\n    }\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return cleanup;\n  }, []);\n\n  // Auto-test devices when component mounts\n  useEffect(() => {\n    if (!isAutoTesting && !videoTested && !micTested) {\n      autoTestDevices();\n    }\n  }, []);\n\n  const retryDeviceTest = () => {\n    setVideoTested(false);\n    setMicTested(false);\n    setCameraError(null);\n    setMicError(null);\n    setMicLevel(0);\n    cleanup();\n\n    autoTestDevices();\n  };\n\n  if (needsPermission) {\n    const canStartInterview =\n      consentGiven && micTested && videoTested && !isAutoTesting;\n    const hasErrors = cameraError || micError;\n\n    return (\n      <PageWrapper\n        title=\"Interview Setup\"\n        description=\"We'll test your camera and microphone, then you can start your interview.\"\n      >\n        <div className=\"space-y-6\">\n          {/* Device Test Section - Top Priority */}\n          <div className=\"bg-white rounded-2xl border border-gray-100 p-4 shadow-sm\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Device Check\n              </h3>\n              <div className=\"text-sm text-gray-600\">\n                {isAutoTesting\n                  ? \"Testing...\"\n                  : videoTested && micTested\n                  ? \"Ready\"\n                  : hasErrors\n                  ? \"Failed\"\n                  : \"Checking...\"}\n              </div>\n            </div>\n\n            {/* Video Preview */}\n            <div className=\"w-full bg-gray-50 rounded-xl h-48 flex items-center justify-center mb-4 overflow-hidden relative\">\n              {videoTested || isAutoTesting ? (\n                <video\n                  ref={videoRef}\n                  className=\"w-full h-full object-cover rounded-xl\"\n                  muted\n                  playsInline\n                  autoPlay\n                />\n              ) : hasErrors ? (\n                <div className=\"text-center p-4\">\n                  <div className=\"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <ExclamationTriangleIcon className=\"w-6 h-6 text-red-500\" />\n                  </div>\n                  <p className=\"text-sm text-red-600 font-medium\">\n                    {cameraError}\n                  </p>\n                </div>\n              ) : (\n                <div className=\"text-center\">\n                  <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-2\"></div>\n                  <p className=\"text-sm text-gray-600\">Starting camera...</p>\n                </div>\n              )}\n            </div>\n\n            {/* Audio Level Indicator */}\n            <div className=\"bg-gray-50 rounded-xl p-3 mb-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <div\n                    className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                      isAutoTesting || micTested ? \"bg-blue-100\" : \"bg-gray-200\"\n                    }`}\n                  >\n                    <MicrophoneIcon\n                      className={`w-4 h-4 ${\n                        isAutoTesting || micTested\n                          ? \"text-blue-600\"\n                          : \"text-gray-400\"\n                      }`}\n                    />\n                  </div>\n                  <span className=\"text-sm font-medium text-gray-900\">\n                    Microphone\n                  </span>\n                </div>\n                {micTested && (\n                  <div className=\"bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium\">\n                    Ready\n                  </div>\n                )}\n              </div>\n\n              {(isAutoTesting || micTested) && (\n                <div>\n                  <div className=\"w-full h-1.5 bg-gray-200 rounded-full overflow-hidden\">\n                    <div\n                      className=\"h-1.5 bg-blue-500 rounded-full transition-all duration-150\"\n                      style={{ width: `${micLevel}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-xs text-gray-600 mt-1 text-center\">\n                    {isAutoTesting\n                      ? \"Speak to test your microphone\"\n                      : `Audio level: ${Math.round(micLevel)}%`}\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Device Status */}\n            <div className=\"grid grid-cols-2 gap-3\">\n              <div\n                className={`p-3 rounded-lg text-center transition-all ${\n                  videoTested\n                    ? \"bg-green-50 border border-green-200\"\n                    : hasErrors\n                    ? \"bg-red-50 border border-red-200\"\n                    : isAutoTesting\n                    ? \"bg-blue-50 border border-blue-200\"\n                    : \"bg-gray-50 border border-gray-200\"\n                }`}\n              >\n                <VideoCameraIcon\n                  className={`w-5 h-5 mx-auto mb-1 ${\n                    videoTested\n                      ? \"text-green-600\"\n                      : hasErrors\n                      ? \"text-red-600\"\n                      : isAutoTesting\n                      ? \"text-blue-600\"\n                      : \"text-gray-400\"\n                  }`}\n                />\n                <div className=\"text-xs font-medium\">\n                  {videoTested\n                    ? \"Camera Ready\"\n                    : hasErrors\n                    ? \"Camera Failed\"\n                    : isAutoTesting\n                    ? \"Testing...\"\n                    : \"Camera Pending\"}\n                </div>\n              </div>\n\n              <div\n                className={`p-3 rounded-lg text-center transition-all ${\n                  micTested\n                    ? \"bg-green-50 border border-green-200\"\n                    : hasErrors\n                    ? \"bg-red-50 border border-red-200\"\n                    : isAutoTesting\n                    ? \"bg-blue-50 border border-blue-200\"\n                    : \"bg-gray-50 border border-gray-200\"\n                }`}\n              >\n                <MicrophoneIcon\n                  className={`w-5 h-5 mx-auto mb-1 ${\n                    micTested\n                      ? \"text-green-600\"\n                      : hasErrors\n                      ? \"text-red-600\"\n                      : isAutoTesting\n                      ? \"text-blue-600\"\n                      : \"text-gray-400\"\n                  }`}\n                />\n                <div className=\"text-xs font-medium\">\n                  {micTested\n                    ? \"Mic Ready\"\n                    : hasErrors\n                    ? \"Mic Failed\"\n                    : isAutoTesting\n                    ? \"Testing...\"\n                    : \"Mic Pending\"}\n                </div>\n              </div>\n            </div>\n\n            {/* Helpful note when devices not found */}\n            {hasErrors &&\n              cameraError?.includes(\"No camera or microphone found\") && (\n                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <div className=\"text-sm text-blue-800\">\n                    <p className=\"font-medium mb-2\">Device Setup Help:</p>\n                    <ul className=\"text-xs space-y-1 list-disc list-inside\">\n                      <li>\n                        Make sure your camera and microphone are properly\n                        connected\n                      </li>\n                      <li>\n                        Check if other applications are using your devices\n                      </li>\n                      <li>Try refreshing the page after connecting devices</li>\n                      <li>\n                        You can still proceed with the interview if needed\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              )}\n\n            {hasErrors && (\n              <button\n                onClick={retryDeviceTest}\n                className=\"mt-4 w-full py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors\"\n              >\n                Try Again\n              </button>\n            )}\n          </div>\n\n          {/* Simple Privacy Consent */}\n          <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-100\">\n            <div className=\"flex items-start gap-3\">\n              <input\n                type=\"checkbox\"\n                id=\"privacyConsent\"\n                checked={consentGiven}\n                onChange={(e) => setConsentGiven(e.target.checked)}\n                className=\"w-4 h-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 mt-0.5 flex-shrink-0\"\n              />\n              <label\n                htmlFor=\"privacyConsent\"\n                className=\"cursor-pointer text-sm text-gray-900 font-medium\"\n              >\n                I have read and agree to the{\" \"}\n                <button\n                  onClick={() => window.open(\"/privacy-policy\", \"_blank\")}\n                  className=\"text-blue-600 hover:text-blue-700 underline font-semibold\"\n                >\n                  Privacy Policy\n                </button>{\" \"}\n                and consent to the recording of this interview.\n              </label>\n            </div>\n          </div>\n        </div>\n\n        <PrimaryButton\n          onClick={async () => {\n            if (canStartInterview && !isStartingInterview) {\n              setIsStartingInterview(true);\n\n              // Show loading for 2 seconds\n              setTimeout(() => {\n                setIsStartingInterview(false);\n                onStartInterview();\n              }, 2000);\n            }\n          }}\n        >\n          {isStartingInterview ? (\n            <div className=\"flex items-center justify-center gap-3\">\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n              <span>Starting Interview...</span>\n            </div>\n          ) : canStartInterview ? (\n            \"Start Interview\"\n          ) : !consentGiven ? (\n            \"Please accept our privacy policy to continue\"\n          ) : isAutoTesting ? (\n            \"Testing devices...\"\n          ) : (\n            \"Please wait for device test to complete\"\n          )}\n        </PrimaryButton>\n\n        <div className=\"flex items-center justify-center gap-6 mt-6\">\n          <button\n            onClick={() => (window.location.href = \"/\")}\n            disabled={isStartingInterview}\n            className={`text-sm transition-colors ${\n              isStartingInterview\n                ? \"text-gray-300 cursor-not-allowed\"\n                : \"text-gray-500 hover:text-gray-700\"\n            }`}\n          >\n            Cancel & Go Home\n          </button>\n          <button\n            onClick={() => window.open(\"/privacy-policy\", \"_blank\")}\n            disabled={isStartingInterview}\n            className={`text-sm transition-colors ${\n              isStartingInterview\n                ? \"text-gray-300 cursor-not-allowed\"\n                : \"text-blue-600 hover:text-blue-700\"\n            }`}\n          >\n            View Privacy Policy\n          </button>\n        </div>\n      </PageWrapper>\n    );\n  }\n\n  if (error) {\n    return (\n      <PageWrapper\n        title=\"Connection Error\"\n        description={error || \"An unexpected error occurred while connecting.\"}\n      >\n        <div className=\"w-20 h-20 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg\">\n          <ExclamationTriangleIcon className=\"w-10 h-10 text-red-500\" />\n        </div>\n        <div className=\"text-sm text-gray-500 mb-6 p-4 bg-gray-50/80 rounded-xl text-left\">\n          <p className=\"font-medium mb-2\">\n            This page requires specific URL parameters to function correctly.\n            Please ensure you have the correct link.\n          </p>\n        </div>\n        <PrimaryButton onClick={() => window.location.reload()}>\n          Try Again\n        </PrimaryButton>\n      </PageWrapper>\n    );\n  }\n\n  if (isConnecting) {\n    return (\n      <PageWrapper\n        title=\"Connecting to Interview\"\n        description=\"Setting up your secure interview session. This won't take long.\"\n      >\n        <div className=\"relative mb-6\">\n          <div className=\"w-20 h-20 border-4 border-[#13ead9] border-t-transparent rounded-full animate-spin mx-auto\"></div>\n          <div className=\"absolute inset-0 w-20 h-20 border-4 border-[#0891b2]/30 border-b-transparent rounded-full animate-spin animation-delay-150 mx-auto\"></div>\n        </div>\n      </PageWrapper>\n    );\n  }\n\n  if (!isConnected) {\n    return (\n      <PageWrapper\n        title=\"Waiting for Connection\"\n        description=\"Establishing connection to the interview room. Please wait.\"\n      >\n        <div className=\"w-20 h-20 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg\">\n          <VideoCameraSlashIcon className=\"w-10 h-10 text-slate-500\" />\n        </div>\n      </PageWrapper>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/InterviewHeader.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  CpuChipIcon,\n  ClockIcon,\n  TrophyIcon,\n} from \"@heroicons/react/24/outline\";\nimport { useVoiceAssistant } from \"@livekit/components-react\";\n\ninterface JobInfo {\n  title?: string;\n  location?: string;\n  experience?: string;\n}\n\ninterface CompanyInfo {\n  name?: string;\n  logo?: string;\n}\n\ninterface InterviewHeaderProps {\n  jobInfo?: JobInfo;\n  companyInfo?: CompanyInfo;\n  participantName?: string;\n  sessionDuration: number;\n}\n\nexport function InterviewHeader({\n  jobInfo,\n  companyInfo,\n  participantName,\n  sessionDuration,\n}: InterviewHeaderProps) {\n  const { state } = useVoiceAssistant();\n\n  const statusInfo = {\n    idle: { text: \"Ready\", color: \"blue-500\", bgColor: \"bg-blue-500\" },\n    listening: {\n      text: \"Listening\",\n      color: \"green-500\",\n      bgColor: \"bg-green-500\",\n    },\n    thinking: {\n      text: \"Processing\",\n      color: \"amber-500\",\n      bgColor: \"bg-amber-500\",\n    },\n    speaking: {\n      text: \"Speaking\",\n      color: \"purple-500\",\n      bgColor: \"bg-purple-500\",\n    },\n    disconnected: {\n      text: \"Reconnecting\",\n      color: \"gray-500\",\n      bgColor: \"bg-gray-500\",\n    },\n  } as const;\n\n  const currentStatus =\n    statusInfo[state as keyof typeof statusInfo] || statusInfo.idle;\n\n  return (\n    <div className=\"bg-gradient-to-r from-white/98 via-slate-50/95 to-white/98 backdrop-blur-xl rounded-t-xl lg:rounded-t-3xl border-b border-slate-200/40 shadow-lg\">\n      <div className=\"px-2 lg:px-8 py-2 lg:py-6\">\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 lg:gap-0\">\n          {/* Left Section - Brand & Interview Info - Simplified on mobile */}\n          <div className=\"flex items-center gap-2 lg:gap-6\">\n            <div className=\"relative\">\n              <div className=\"w-10 h-10 lg:w-16 lg:h-16 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-lg lg:rounded-2xl flex items-center justify-center shadow-2xl animate-pulse\">\n                <CpuChipIcon className=\"w-5 h-5 lg:w-8 lg:h-8 text-white\" />\n              </div>\n              <div className=\"absolute -top-0.5 -right-0.5 w-3 h-3 lg:w-5 lg:h-5 bg-green-500 rounded-full border-2 lg:border-3 border-white animate-pulse shadow-lg\"></div>\n              <div className=\"absolute inset-0 rounded-lg lg:rounded-2xl border-2 border-[#13ead9]/30 animate-pulse\"></div>\n            </div>\n\n            <div className=\"space-y-0.5 lg:space-y-1 min-w-0 flex-1\">\n              <div className=\"flex flex-col lg:flex-row lg:items-center gap-1 lg:gap-3\">\n                <h1 className=\"text-sm lg:text-2xl font-bold text-slate-800 tracking-tight truncate\">\n                  {jobInfo?.title ? `${jobInfo.title}` : \"AI Interview\"}\n                </h1>\n                <span className=\"px-1.5 lg:px-3 py-0.5 lg:py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full border border-blue-200 self-start lg:self-auto\">\n                  LIVE\n                </span>\n              </div>\n\n              {/* Hide detailed info on mobile */}\n              <div className=\"hidden sm:flex flex-wrap items-center gap-2 lg:gap-4 text-xs lg:text-sm text-slate-600\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"w-2 h-2 bg-[#13ead9] rounded-full animate-pulse\"></span>\n                  <span className=\"font-medium\">Rolevate AI Platform</span>\n                </div>\n\n                {companyInfo?.name && (\n                  <>\n                    <div className=\"hidden lg:block h-3 w-px bg-slate-300\"></div>\n                    <span className=\"text-slate-600 font-medium truncate\">\n                      {companyInfo.name}\n                    </span>\n                  </>\n                )}\n\n                {jobInfo?.location && (\n                  <>\n                    <div className=\"hidden lg:block h-3 w-px bg-slate-300\"></div>\n                    <span className=\"text-slate-500 truncate\">\n                      {jobInfo.location}\n                    </span>\n                  </>\n                )}\n\n                {participantName && (\n                  <>\n                    <div className=\"hidden lg:block h-3 w-px bg-slate-300\"></div>\n                    <span className=\"text-slate-600 truncate\">\n                      Candidate: {participantName}\n                    </span>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Right Section - Status & Controls - Simplified on mobile */}\n          <div className=\"flex items-center gap-1.5 lg:gap-4 overflow-x-auto\">\n            {/* AI Status Indicator - Simplified on mobile */}\n            <div className=\"flex items-center gap-1.5 lg:gap-3 px-2 lg:px-5 py-1.5 lg:py-3 bg-white/90 backdrop-blur-sm rounded-lg lg:rounded-2xl border border-slate-200/50 shadow-lg hover:shadow-xl transition-all duration-300 shrink-0\">\n              <div className=\"relative\">\n                <div\n                  className={`w-2.5 h-2.5 lg:w-4 lg:h-4 rounded-full ${currentStatus.bgColor} shadow-lg`}\n                ></div>\n                <div\n                  className={`absolute inset-0 w-2.5 h-2.5 lg:w-4 lg:h-4 rounded-full ${currentStatus.bgColor} animate-ping opacity-75`}\n                ></div>\n              </div>\n              <div className=\"text-xs lg:text-sm\">\n                <div className=\"font-semibold text-slate-700\">\n                  {currentStatus.text}\n                </div>\n                <div className=\"text-xs text-slate-500 hidden lg:block\">\n                  AI Interviewer\n                </div>\n              </div>\n            </div>\n\n            {/* Session Timer - Compact on mobile */}\n            <div className=\"flex items-center gap-1.5 lg:gap-3 px-2 lg:px-4 py-1.5 lg:py-3 bg-slate-50/90 backdrop-blur-sm rounded-lg lg:rounded-2xl border border-slate-200/50 shadow-lg shrink-0\">\n              <ClockIcon className=\"w-3.5 h-3.5 lg:w-5 lg:h-5 text-slate-500\" />\n              <div className=\"text-xs lg:text-sm\">\n                <div className=\"font-mono font-semibold text-slate-700\">\n                  {Math.floor(sessionDuration / 60)}:\n                  {(sessionDuration % 60).toString().padStart(2, \"0\")}\n                </div>\n                <div className=\"text-xs text-slate-500 hidden lg:block\">\n                  Duration\n                </div>\n              </div>\n            </div>\n\n            {/* Interview Progress - Hidden on mobile and tablet */}\n            {jobInfo?.title && (\n              <div className=\"hidden xl:flex items-center gap-3 px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200/50 shadow-lg shrink-0\">\n                <TrophyIcon className=\"w-5 h-5 text-blue-600\" />\n                <div className=\"text-sm\">\n                  <div className=\"font-semibold text-blue-700\">\n                    Interview Active\n                  </div>\n                  <div className=\"text-xs text-blue-600\">{jobInfo.title}</div>\n                  {companyInfo?.name && (\n                    <div className=\"text-xs text-blue-500\">\n                      {companyInfo.name}\n                    </div>\n                  )}\n                  {jobInfo?.experience && (\n                    <div className=\"text-xs text-blue-400\">\n                      {jobInfo.experience} experience\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1193, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/VideoControls.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  MicrophoneIcon,\n  VideoCameraIcon,\n  VideoCameraSlashIcon,\n  ComputerDesktopIcon,\n  LanguageIcon,\n  ArrowsPointingOutIcon,\n  ArrowsPointingInIcon,\n  XMarkIcon,\n} from \"@heroicons/react/24/outline\";\n\ninterface MediaControls {\n  isMuted: boolean;\n  isVideoEnabled: boolean;\n  toggleMicrophone: () => void;\n  toggleCamera: () => void;\n}\n\ninterface VideoControlsProps {\n  mediaControls: MediaControls;\n  showCaptions: boolean;\n  onToggleCaptions: () => void;\n}\n\nexport function VideoControls({\n  mediaControls,\n  showCaptions,\n  onToggleCaptions,\n}: VideoControlsProps) {\n  const {\n    isMicEnabled,\n    isCameraEnabled,\n    isScreenSharing,\n    isVideoFullscreen,\n    displayTrack,\n    toggleMicrophone,\n    toggleCamera,\n    toggleScreenShare,\n    toggleFullscreen,\n  } = mediaControls;\n\n  // Only show controls when video is active\n  if (!displayTrack || (!isCameraEnabled && !isScreenSharing)) {\n    return null;\n  }\n\n  return (\n    <div\n      className={`absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent transition-opacity duration-300 z-30 ${\n        isVideoFullscreen ? \"opacity-100\" : \"opacity-0 group-hover:opacity-100\"\n      }`}\n    >\n      <div className=\"absolute bottom-2 lg:bottom-4 left-2 lg:left-4 right-2 lg:right-4 flex items-center justify-between\">\n        {/* Participant Badge - Simplified on mobile */}\n        <div className=\"bg-black/70 backdrop-blur-sm text-white px-2 lg:px-4 py-1 lg:py-2 rounded-lg lg:rounded-xl text-xs lg:text-sm font-medium\">\n          <div className=\"flex items-center gap-1 lg:gap-2\">\n            <div className=\"w-1.5 h-1.5 lg:w-2 lg:h-2 bg-green-400 rounded-full animate-pulse\"></div>\n            <span className=\"hidden sm:inline\">Candidate</span>\n            <span className=\"sm:hidden\">â€¢</span>\n            {isScreenSharing && (\n              <div className=\"hidden sm:flex items-center gap-1 ml-2 px-2 py-1 bg-blue-500/80 rounded-lg text-xs\">\n                <ComputerDesktopIcon className=\"w-3 h-3\" />\n                Screen\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Control Buttons - Mobile optimized */}\n        <div className=\"flex items-center gap-1 lg:gap-2\">\n          {/* Microphone Toggle - Mobile optimized */}\n          <button\n            onClick={toggleMicrophone}\n            className={`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${\n              isMicEnabled\n                ? \"bg-white/90 text-slate-700 hover:bg-white\"\n                : \"bg-red-500 text-white hover:bg-red-600\"\n            }`}\n            title={isMicEnabled ? \"Mute microphone\" : \"Unmute microphone\"}\n            aria-label={isMicEnabled ? \"Mute microphone\" : \"Unmute microphone\"}\n          >\n            {isMicEnabled ? (\n              <MicrophoneIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            ) : (\n              <div className=\"relative\">\n                <MicrophoneIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n                <XMarkIcon className=\"w-2.5 h-2.5 lg:w-3 lg:h-3 absolute -top-0.5 -right-0.5 text-white\" />\n              </div>\n            )}\n          </button>\n\n          {/* Camera Toggle - Mobile optimized */}\n          <button\n            onClick={toggleCamera}\n            className={`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${\n              isCameraEnabled\n                ? \"bg-white/90 text-slate-700 hover:bg-white\"\n                : \"bg-red-500 text-white hover:bg-red-600\"\n            }`}\n            title={isCameraEnabled ? \"Turn off camera\" : \"Turn on camera\"}\n            aria-label={isCameraEnabled ? \"Turn off camera\" : \"Turn on camera\"}\n          >\n            {isCameraEnabled ? (\n              <VideoCameraIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            ) : (\n              <VideoCameraSlashIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            )}\n          </button>\n\n          {/* Screen Share Toggle - Hidden on mobile */}\n          <button\n            onClick={toggleScreenShare}\n            className={`hidden sm:flex w-8 h-8 lg:w-10 lg:h-10 rounded-full items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${\n              isScreenSharing\n                ? \"bg-blue-500 text-white hover:bg-blue-600\"\n                : \"bg-white/90 text-slate-700 hover:bg-white\"\n            }`}\n            title={isScreenSharing ? \"Stop sharing screen\" : \"Share screen\"}\n            aria-label={\n              isScreenSharing ? \"Stop sharing screen\" : \"Share screen\"\n            }\n          >\n            <ComputerDesktopIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n          </button>\n\n          {/* Captions Toggle - Mobile optimized */}\n          <button\n            onClick={onToggleCaptions}\n            className={`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50 ${\n              showCaptions\n                ? \"bg-green-500 text-white hover:bg-green-600\"\n                : \"bg-white/90 text-slate-700 hover:bg-white\"\n            }`}\n            title={showCaptions ? \"Hide captions\" : \"Show captions\"}\n            aria-label={showCaptions ? \"Hide captions\" : \"Show captions\"}\n          >\n            <LanguageIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n          </button>\n\n          {/* Fullscreen Toggle - Hidden on mobile */}\n          <button\n            onClick={toggleFullscreen}\n            className=\"hidden sm:flex w-8 h-8 lg:w-10 lg:h-10 bg-white/90 hover:bg-white text-slate-700 rounded-full items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50\"\n            title={isVideoFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"}\n            aria-label={\n              isVideoFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"\n            }\n          >\n            {isVideoFullscreen ? (\n              <ArrowsPointingInIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            ) : (\n              <ArrowsPointingOutIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAwBO,SAAS,cAAc,EAC5B,aAAa,EACb,YAAY,EACZ,gBAAgB,EACG;IACnB,MAAM,EACJ,YAAY,EACZ,eAAe,EACf,eAAe,EACf,iBAAiB,EACjB,YAAY,EACZ,gBAAgB,EAChB,YAAY,EACZ,iBAAiB,EACjB,gBAAgB,EACjB,GAAG;IAEJ,0CAA0C;IAC1C,IAAI,CAAC,gBAAiB,CAAC,mBAAmB,CAAC,iBAAkB;QAC3D,OAAO;IACT;IAEA,qBACE,6LAAC;QACC,WAAW,CAAC,oHAAoH,EAC9H,oBAAoB,gBAAgB,qCACpC;kBAEF,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAK,WAAU;0CAAmB;;;;;;0CACnC,6LAAC;gCAAK,WAAU;0CAAY;;;;;;4BAC3B,iCACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,wOAAA,CAAA,sBAAmB;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;8BAQnD,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,SAAS;4BACT,WAAW,CAAC,sJAAsJ,EAChK,eACI,8CACA,0CACJ;4BACF,OAAO,eAAe,oBAAoB;4BAC1C,cAAY,eAAe,oBAAoB;sCAE9C,6BACC,6LAAC,8NAAA,CAAA,iBAAc;gCAAC,WAAU;;;;;qDAE1B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,8NAAA,CAAA,iBAAc;wCAAC,WAAU;;;;;;kDAC1B,6LAAC,oNAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAM3B,6LAAC;4BACC,SAAS;4BACT,WAAW,CAAC,sJAAsJ,EAChK,kBACI,8CACA,0CACJ;4BACF,OAAO,kBAAkB,oBAAoB;4BAC7C,cAAY,kBAAkB,oBAAoB;sCAEjD,gCACC,6LAAC,gOAAA,CAAA,kBAAe;gCAAC,WAAU;;;;;qDAE3B,6LAAC,0OAAA,CAAA,uBAAoB;gCAAC,WAAU;;;;;;;;;;;sCAKpC,6LAAC;4BACC,SAAS;4BACT,WAAW,CAAC,gKAAgK,EAC1K,kBACI,6CACA,6CACJ;4BACF,OAAO,kBAAkB,wBAAwB;4BACjD,cACE,kBAAkB,wBAAwB;sCAG5C,cAAA,6LAAC,wOAAA,CAAA,sBAAmB;gCAAC,WAAU;;;;;;;;;;;sCAIjC,6LAAC;4BACC,SAAS;4BACT,WAAW,CAAC,sJAAsJ,EAChK,eACI,+CACA,6CACJ;4BACF,OAAO,eAAe,kBAAkB;4BACxC,cAAY,eAAe,kBAAkB;sCAE7C,cAAA,6LAAC,0NAAA,CAAA,eAAY;gCAAC,WAAU;;;;;;;;;;;sCAI1B,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,OAAO,oBAAoB,oBAAoB;4BAC/C,cACE,oBAAoB,oBAAoB;sCAGzC,kCACC,6LAAC,0OAAA,CAAA,uBAAoB;gCAAC,WAAU;;;;;qDAEhC,6LAAC,4OAAA,CAAA,wBAAqB;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/C;KAtIgB","debugId":null}},
    {"offset": {"line": 1426, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/VideoPanel.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { TranscriptionSegment } from \"livekit-client\";\nimport {\n  VideoCameraIcon,\n  TrophyIcon,\n  ComputerDesktopIcon,\n  XMarkIcon,\n} from \"@heroicons/react/24/outline\";\nimport {\n  VideoTrack,\n  useLocalParticipant,\n  useRoomContext,\n} from \"@livekit/components-react\";\nimport { VideoControls } from \"./VideoControls\";\n\ninterface MediaControls {\n  isCameraEnabled: boolean;\n  isScreenSharing: boolean;\n  isVideoFullscreen: boolean;\n  displayTrack: unknown;\n  displaySource: unknown;\n  toggleCamera: () => void;\n}\n\ninterface VideoPanelProps {\n  mediaControls: MediaControls;\n}\n\nexport function VideoPanel({ mediaControls }: VideoPanelProps) {\n  const { localParticipant } = useLocalParticipant();\n  const room = useRoomContext();\n  const [aiTranscript, setAiTranscript] = useState<string>(\"\");\n  const [showCaptions, setShowCaptions] = useState(true);\n  const [isTranscriptFinal, setIsTranscriptFinal] = useState<boolean>(false);\n\n  const {\n    isCameraEnabled,\n    isScreenSharing,\n    isVideoFullscreen,\n    displayTrack,\n    displaySource,\n    toggleCamera,\n  } = mediaControls;\n\n  // Listen for AI transcriptions\n  useEffect(() => {\n    if (!room) return;\n\n    const handleTranscriptionReceived = (\n      segments: TranscriptionSegment[],\n      participant: unknown\n    ) => {\n      if (participant && participant !== localParticipant) {\n        const streamingText = segments.map((segment) => segment.text).join(\" \");\n\n        if (streamingText.trim()) {\n          setAiTranscript(streamingText);\n          const hasFinalSegment = segments.some((segment) => segment.final);\n          setIsTranscriptFinal(hasFinalSegment);\n\n          if (hasFinalSegment) {\n            setTimeout(() => {\n              setAiTranscript(\"\");\n              setIsTranscriptFinal(false);\n            }, 5000);\n          }\n        }\n      }\n    };\n\n    room.on(\"transcriptionReceived\", handleTranscriptionReceived);\n    return () => {\n      room.off(\"transcriptionReceived\", handleTranscriptionReceived);\n    };\n  }, [room, localParticipant]);\n\n  return (\n    <div\n      className={`video-container relative aspect-video sm:aspect-video bg-gradient-to-br from-slate-50 to-slate-100 rounded-none sm:rounded-2xl overflow-hidden shadow-none sm:shadow-xl border-0 sm:border border-slate-200/50 group min-h-[70vh] sm:min-h-0 w-full ${\n        isVideoFullscreen ? \"fullscreen-container\" : \"\"\n      }`}\n    >\n      {/* Video Content */}\n      {displayTrack && (isCameraEnabled || isScreenSharing) ? (\n        <VideoTrack\n          trackRef={{\n            publication: localParticipant.getTrackPublication(displaySource)!,\n            source: displaySource,\n            participant: localParticipant,\n          }}\n          className={`w-full h-full ${\n            isVideoFullscreen ? \"fullscreen-video\" : \"object-cover\"\n          }`}\n        />\n      ) : (\n        <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100 relative z-10\">\n          <div className=\"text-center text-slate-500 max-w-md px-6 relative z-20\">\n            {!isCameraEnabled ? (\n              <CameraPrompt onEnableCamera={toggleCamera} />\n            ) : (\n              <ScreenSharePrompt />\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Live Captions Overlay - Mobile optimized */}\n      {aiTranscript && showCaptions && (\n        <div className=\"absolute bottom-12 lg:bottom-16 left-2 right-2 lg:left-4 lg:right-4 z-40 pointer-events-none animate-in slide-in-from-bottom-2 duration-300\">\n          <div className=\"bg-black/90 backdrop-blur-sm text-white px-2 lg:px-4 py-2 lg:py-3 rounded-lg lg:rounded-xl shadow-2xl border border-white/20 max-w-3xl mx-auto\">\n            <div className=\"flex items-start gap-2 lg:gap-3\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-5 h-5 lg:w-6 lg:h-6 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-full flex items-center justify-center\">\n                  <span className=\"text-xs font-bold text-white\">AI</span>\n                </div>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-xs lg:text-sm leading-relaxed font-medium text-white/95\">\n                  {aiTranscript}\n                  {!isTranscriptFinal && (\n                    <span className=\"inline-block w-0.5 h-3 lg:h-4 bg-white/70 ml-1 animate-pulse rounded-sm\"></span>\n                  )}\n                </p>\n              </div>\n              <button\n                onClick={() => setShowCaptions(false)}\n                className=\"flex-shrink-0 w-4 h-4 lg:w-5 lg:h-5 text-white/70 hover:text-white/90 transition-colors pointer-events-auto\"\n                title=\"Hide captions\"\n              >\n                <XMarkIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Video Controls */}\n      <VideoControls\n        mediaControls={mediaControls}\n        showCaptions={showCaptions}\n        onToggleCaptions={() => setShowCaptions(!showCaptions)}\n      />\n\n      {/* Quality Indicator - Hidden on mobile */}\n      <div className=\"absolute top-2 lg:top-4 right-2 lg:right-4 flex flex-col gap-1 lg:gap-2\">\n        <div className=\"hidden sm:block bg-white/90 backdrop-blur-sm px-2 lg:px-3 py-1 rounded-lg text-xs font-bold text-slate-700 shadow-lg border border-white/50\">\n          <div className=\"flex items-center gap-1 lg:gap-2\">\n            <div className=\"flex gap-0.5\">\n              {[3, 4, 2, 5].map((height, i) => (\n                <div\n                  key={i}\n                  className={`w-0.5 bg-green-500 rounded-full`}\n                  style={{ height: `${height * 3}px` }}\n                />\n              ))}\n            </div>\n            {isScreenSharing ? \"1440p\" : \"720p\"}\n          </div>\n        </div>\n\n        {!isCameraEnabled && (\n          <div className=\"hidden sm:block bg-blue-500/90 backdrop-blur-sm px-2 lg:px-3 py-1 lg:py-1.5 rounded-lg text-xs font-medium text-white shadow-lg border border-blue-400/50\">\n            <div className=\"flex items-center gap-1 lg:gap-1.5\">\n              <TrophyIcon className=\"w-3 h-3\" />\n              <span>+15 pts</span>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Camera Enable Prompt Component - Mobile optimized\nfunction CameraPrompt({ onEnableCamera }: { onEnableCamera: () => void }) {\n  return (\n    <div className=\"space-y-4 lg:space-y-6\">\n      <div className=\"w-16 h-16 lg:w-20 lg:h-20 bg-gradient-to-br from-slate-100 to-slate-200 rounded-xl lg:rounded-2xl flex items-center justify-center mx-auto mb-4 lg:mb-6 shadow-lg animate-pulse\">\n        <VideoCameraIcon className=\"w-8 h-8 lg:w-10 lg:h-10 text-slate-500\" />\n      </div>\n\n      <div className=\"space-y-3 lg:space-y-4\">\n        <h3 className=\"text-base lg:text-lg font-semibold text-slate-700\">\n          Camera Not Active\n        </h3>\n        <p className=\"text-sm text-slate-600 leading-relaxed\">\n          Enable your camera for better engagement during the interview.\n        </p>\n\n        <div className=\"bg-blue-50 border border-blue-200/50 rounded-lg lg:rounded-xl p-2 lg:p-3\">\n          <div className=\"flex items-center justify-center gap-1.5 lg:gap-2 mb-1\">\n            <TrophyIcon className=\"w-3 h-3 lg:w-4 lg:h-4 text-blue-600\" />\n            <span className=\"text-xs lg:text-sm font-medium text-blue-700\">\n              +15 points bonus\n            </span>\n          </div>\n          <p className=\"text-xs text-blue-600 text-center\">\n            Better engagement score with video\n          </p>\n        </div>\n      </div>\n\n      <button\n        onClick={onEnableCamera}\n        className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 lg:px-6 py-3 lg:py-4 rounded-xl lg:rounded-2xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] flex items-center justify-center gap-2 lg:gap-3 cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n      >\n        <VideoCameraIcon className=\"w-4 h-4 lg:w-5 lg:h-5\" />\n        Enable Camera\n      </button>\n    </div>\n  );\n}\n\n// Screen Share Disabled Fallback - Mobile optimized\nfunction ScreenSharePrompt() {\n  return (\n    <div className=\"space-y-3 lg:space-y-4\">\n      <div className=\"w-16 h-16 lg:w-20 lg:h-20 bg-white rounded-xl lg:rounded-2xl flex items-center justify-center mx-auto mb-3 lg:mb-4 shadow-lg animate-pulse\">\n        <ComputerDesktopIcon className=\"w-8 h-8 lg:w-10 lg:h-10 text-slate-400\" />\n      </div>\n      <h3 className=\"text-base lg:text-lg font-semibold text-slate-600 mb-2\">\n        Screen Share Disabled\n      </h3>\n      <p className=\"text-sm text-slate-500\">\n        Use screen share button to show your presentation\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1884, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/AIAssistantPanel.tsx"],"sourcesContent":["import React from \"react\";\nimport { PhoneXMarkIcon } from \"@heroicons/react/24/outline\";\nimport { useVoiceAssistant } from \"@livekit/components-react\";\n\ninterface AIAssistantPanelProps {\n  sessionDuration: number;\n}\n\nexport function AIAssistantPanel({ sessionDuration }: AIAssistantPanelProps) {\n  const { state } = useVoiceAssistant();\n\n  const statusInfo = {\n    idle: {\n      text: \"Ready\",\n      bgColor: \"bg-blue-500\",\n      message: \"Interview session is ready\",\n    },\n    listening: {\n      text: \"Listening\",\n      bgColor: \"bg-green-500\",\n      message: \"Actively listening to your response\",\n    },\n    thinking: {\n      text: \"Processing\",\n      bgColor: \"bg-amber-500\",\n      message: \"Analyzing your response\",\n    },\n    speaking: {\n      text: \"Speaking\",\n      bgColor: \"bg-purple-500\",\n      message: \"AI interviewer is responding\",\n    },\n    disconnected: {\n      text: \"Reconnecting\",\n      bgColor: \"bg-gray-500\",\n      message: \"Attempting to reconnect\",\n    },\n  } as const;\n\n  const currentStatus =\n    statusInfo[state as keyof typeof statusInfo] || statusInfo.idle;\n\n  const handleEndInterview = () => {\n    if (window.confirm(\"Are you sure you want to end the interview?\")) {\n      window.parent.postMessage({ type: \"END_INTERVIEW\" }, \"*\");\n      window.location.href = \"/\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* AI Avatar Section */}\n      <div className=\"bg-gradient-to-br from-white to-slate-50/50 rounded-2xl p-6 border border-slate-200/50 shadow-lg text-center\">\n        {/* AI Avatar */}\n        <div className=\"relative w-28 h-28 mx-auto mb-6 animate-pulse\">\n          <div className=\"absolute inset-0 bg-gradient-to-br from-[#13ead9]/20 to-[#0891b2]/20 rounded-full animate-pulse\"></div>\n          <div className=\"absolute inset-2 bg-gradient-to-br from-[#13ead9] to-[#0891b2] rounded-full flex items-center justify-center shadow-xl\">\n            <span className=\"text-2xl font-bold text-white\">AI</span>\n          </div>\n\n          {/* State Indicators */}\n          {state === \"speaking\" && (\n            <div className=\"absolute -bottom-2 -right-2 w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center animate-bounce\">\n              <div className=\"w-3 h-3 bg-white rounded-full\"></div>\n            </div>\n          )}\n\n          {state === \"listening\" && (\n            <div className=\"absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-pulse\">\n              <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n            </div>\n          )}\n\n          {state === \"thinking\" && (\n            <div className=\"absolute -top-2 -left-2 w-8 h-8 bg-amber-500 rounded-full flex items-center justify-center animate-spin\">\n              <div className=\"w-2 h-2 bg-white rounded-full\"></div>\n            </div>\n          )}\n        </div>\n\n        {/* AI Info */}\n        <h3 className=\"text-xl font-bold text-slate-800 mb-2\">\n          AI Executive Interviewer\n        </h3>\n        <p className=\"text-slate-600 mb-4 leading-relaxed\">\n          {currentStatus.message}\n        </p>\n\n        {/* Status Badge */}\n        <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-xl\">\n          <div\n            className={`w-2 h-2 rounded-full ${currentStatus.bgColor} animate-pulse`}\n          ></div>\n          <span className=\"text-sm font-medium text-slate-700\">\n            {currentStatus.text}\n          </span>\n        </div>\n      </div>\n\n      {/* Session Information Panel */}\n      <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200/50 shadow-lg\">\n        <h4 className=\"text-lg font-semibold text-slate-800 mb-4\">\n          Session Information\n        </h4>\n\n        <div className=\"space-y-3\">\n          {/* Duration */}\n          <div className=\"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg\">\n            <span className=\"text-sm text-slate-600\">Duration</span>\n            <span className=\"text-sm font-mono font-semibold text-slate-800\">\n              {Math.floor(sessionDuration / 60)}:\n              {(sessionDuration % 60).toString().padStart(2, \"0\")}\n            </span>\n          </div>\n\n          {/* Connection Status */}\n          <div className=\"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg\">\n            <span className=\"text-sm text-slate-600\">Connection</span>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n              <span className=\"text-sm font-medium text-green-700\">Secure</span>\n            </div>\n          </div>\n\n          {/* Audio Quality */}\n          <div className=\"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg\">\n            <span className=\"text-sm text-slate-600\">Audio Quality</span>\n            <span className=\"text-sm font-medium text-blue-700\">Excellent</span>\n          </div>\n\n          {/* AI Response Quality */}\n          <div className=\"flex items-center justify-between py-2 px-3 bg-white/70 rounded-lg\">\n            <span className=\"text-sm text-slate-600\">AI Performance</span>\n            <span className=\"text-sm font-medium text-purple-700\">Optimal</span>\n          </div>\n        </div>\n\n        {/* Performance Insights */}\n        <div className=\"mt-4 p-3 bg-white/50 rounded-lg border border-blue-200/30\">\n          <h5 className=\"text-sm font-semibold text-blue-800 mb-2\">\n            Live Assessment\n          </h5>\n          <p className=\"text-xs text-blue-700 leading-relaxed\">\n            Demonstrating strong communication skills with clear articulation\n            and thoughtful responses. Maintaining excellent professional\n            presence throughout the session.\n          </p>\n        </div>\n\n        {/* End Interview Button */}\n        <button\n          onClick={handleEndInterview}\n          className=\"w-full mt-6 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-red-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\"\n        >\n          <PhoneXMarkIcon className=\"w-5 h-5\" />\n          End Interview\n        </button>\n      </div>\n\n      {/* Quick Tips */}\n      <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4 border border-green-200/50 shadow-lg\">\n        <h4 className=\"text-sm font-semibold text-green-800 mb-2\">\n          Interview Tips\n        </h4>\n        <ul className=\"text-xs text-green-700 space-y-1\">\n          <li>â€¢ Speak clearly and at a moderate pace</li>\n          <li>â€¢ Take time to think before responding</li>\n          <li>â€¢ Use specific examples when possible</li>\n          <li>â€¢ Ask clarifying questions if needed</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2325, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/hooks/useAudioVisualization.ts"],"sourcesContent":["import { useState, useEffect, useCallback, useRef } from \"react\";\n\nexport function useAudioVisualization(isMicEnabled: boolean) {\n  const [audioLevels, setAudioLevels] = useState<number[]>(Array(45).fill(0));\n  const [audioContext, setAudioContext] = useState<AudioContext | null>(null);\n  const [analyser, setAnalyser] = useState<AnalyserNode | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n\n  // Check if we're on mobile and skip audio visualization entirely to prevent crashes\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n  // Initialize audio analysis when mic is enabled (skip on mobile)\n  useEffect(() => {\n    // Completely skip audio visualization on mobile to prevent voice crashes\n    if (isMobile) {\n      setAudioLevels(Array(45).fill(0));\n      return;\n    }\n\n    if (!isMicEnabled) {\n      setAudioLevels(Array(45).fill(0));\n\n      // Clean up existing resources\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n\n      if (audioContext && audioContext.state !== 'closed') {\n        audioContext.close();\n        setAudioContext(null);\n        setAnalyser(null);\n      }\n      return;\n    }\n\n    const setupAudioAnalysis = async () => {\n      try {\n        // Check if we're on mobile and reduce resource usage\n        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n        const stream = await navigator.mediaDevices.getUserMedia({\n          audio: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            autoGainControl: true,\n            sampleRate: isMobile ? 16000 : 44100, // Lower sample rate on mobile\n          }\n        });\n\n        streamRef.current = stream;\n\n        const context = new AudioContext({\n          sampleRate: isMobile ? 16000 : 44100, // Match sample rates\n        });\n\n        const source = context.createMediaStreamSource(stream);\n        const analyserNode = context.createAnalyser();\n\n        // Reduce FFT size on mobile to save memory\n        analyserNode.fftSize = isMobile ? 64 : 128;\n        source.connect(analyserNode);\n\n        setAudioContext(context);\n        setAnalyser(analyserNode);\n        return undefined;\n      } catch (error) {\n        console.warn(\"Could not access microphone for audio analysis:\", error);\n        // Fallback to simulation with lower frequency on mobile\n        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        const interval = setInterval(() => {\n          const newLevels = Array.from({ length: 45 }, () => Math.random() * 0.3);\n          setAudioLevels(newLevels);\n        }, isMobile ? 200 : 100); // Slower updates on mobile\n\n        intervalRef.current = interval;\n        return () => {\n          if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n          }\n        };\n      }\n    };\n\n    setupAudioAnalysis();\n\n    return () => {\n      // Clean up all resources\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = null;\n      }\n\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n\n      if (audioContext && audioContext.state !== 'closed') {\n        audioContext.close();\n      }\n    };\n  }, [isMicEnabled]);\n\n  // Update audio levels from analyser\n  useEffect(() => {\n    if (!analyser || !isMicEnabled) return;\n\n    const dataArray = new Uint8Array(analyser.frequencyBinCount);\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n    const updateAudioLevels = () => {\n      if (!analyser || !isMicEnabled) return;\n\n      try {\n        analyser.getByteFrequencyData(dataArray);\n\n        const newLevels = Array.from({ length: 45 }, (_, i) => {\n          const dataIndex = Math.floor((i / 45) * dataArray.length);\n          const rawLevel = (dataArray[dataIndex] || 0) / 255;\n          return Math.max(0.05, rawLevel);\n        });\n\n        setAudioLevels(newLevels);\n\n        // Use a slower frame rate on mobile to reduce CPU usage\n        const nextFrame = () => {\n          animationFrameRef.current = requestAnimationFrame(updateAudioLevels);\n        };\n\n        if (isMobile) {\n          setTimeout(nextFrame, 32); // ~30fps on mobile\n        } else {\n          nextFrame(); // 60fps on desktop\n        }\n      } catch (error) {\n        console.warn(\"Error updating audio levels:\", error);\n        // Stop the animation if there's an error\n        if (animationFrameRef.current) {\n          cancelAnimationFrame(animationFrameRef.current);\n          animationFrameRef.current = null;\n        }\n      }\n    };\n\n    updateAudioLevels();\n\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n    };\n  }, [analyser, isMicEnabled]);\n\n  const hasAudioActivity = useCallback(() => {\n    return isMicEnabled && audioLevels.some(level => level > 0.5);\n  }, [isMicEnabled, audioLevels]);\n\n  return {\n    audioLevels,\n    hasAudioActivity: hasAudioActivity()\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2532, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/AudioVisualization.tsx"],"sourcesContent":["import React from \"react\";\nimport { useVoiceAssistant } from \"@livekit/components-react\";\nimport { useAudioVisualization } from \"../hooks/useAudioVisualization\";\n\ninterface AudioVisualizationProps {\n  isMicEnabled: boolean;\n  sessionDuration: number;\n}\n\nexport function AudioVisualization({\n  isMicEnabled,\n  sessionDuration,\n}: AudioVisualizationProps) {\n  const { state } = useVoiceAssistant();\n  const { audioLevels, hasAudioActivity } = useAudioVisualization(isMicEnabled);\n\n  const statusInfo = {\n    idle: { message: \"Interview session is ready\" },\n    listening: { message: \"Actively listening to your response\" },\n    thinking: { message: \"Analyzing your response\" },\n    speaking: { message: \"AI interviewer is responding\" },\n    disconnected: { message: \"Attempting to reconnect\" },\n  } as const;\n\n  const currentStatus =\n    statusInfo[state as keyof typeof statusInfo] || statusInfo.idle;\n\n  return (\n    <div className=\"bg-gradient-to-br from-white to-slate-50/50 rounded-2xl p-6 border border-slate-200/50 shadow-lg\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold text-slate-700\">\n          Real-time Audio Analysis\n        </h3>\n        <div\n          className={`flex items-center gap-2 px-3 py-1 rounded-lg ${\n            isMicEnabled ? \"bg-green-100\" : \"bg-red-100\"\n          }`}\n        >\n          <div\n            className={`w-2 h-2 rounded-full animate-pulse ${\n              isMicEnabled ? \"bg-green-500\" : \"bg-red-500\"\n            }`}\n          ></div>\n          <span\n            className={`text-xs font-medium ${\n              isMicEnabled ? \"text-green-700\" : \"text-red-700\"\n            }`}\n          >\n            {isMicEnabled ? \"ACTIVE\" : \"MUTED\"}\n          </span>\n        </div>\n      </div>\n\n      {/* Audio Visualization */}\n      <div className=\"relative h-20 w-full bg-gradient-to-r from-slate-50 to-white rounded-xl border border-slate-200/50 shadow-inner overflow-hidden\">\n        {/* Background pattern */}\n        <div className=\"absolute inset-0 opacity-20\">\n          <div className=\"absolute top-2 left-4 w-1 h-1 bg-[#13ead9] rounded-full animate-pulse\"></div>\n          <div className=\"absolute top-6 right-8 w-1 h-1 bg-[#0891b2] rounded-full animate-pulse animation-delay-300\"></div>\n          <div className=\"absolute bottom-4 left-12 w-1 h-1 bg-[#13ead9] rounded-full animate-pulse animation-delay-600\"></div>\n        </div>\n\n        {/* Audio bars */}\n        <div className=\"flex gap-1 items-end h-full w-full justify-center p-3\">\n          {audioLevels.map((level, i) => (\n            <div\n              key={i}\n              className={`w-1 rounded-full transition-all duration-100 ${\n                isMicEnabled && level > 0.1\n                  ? \"bg-gradient-to-t from-[#13ead9] to-[#0891b2]\"\n                  : \"bg-gradient-to-t from-gray-300 to-gray-400\"\n              }`}\n              style={{\n                height: `${Math.max(8, level * 70)}%`,\n                opacity: isMicEnabled ? 0.8 + level * 0.2 : 0.3,\n              }}\n            />\n          ))}\n        </div>\n\n        {/* Audio activity indicator */}\n        {hasAudioActivity && (\n          <div className=\"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n        )}\n\n        {/* Shimmer effect when active */}\n        {isMicEnabled && (\n          <div className=\"absolute inset-0 bg-gradient-to-r from-[#13ead9]/20 via-[#0891b2]/20 to-[#13ead9]/20 rounded-xl pointer-events-none opacity-50 animate-pulse\"></div>\n        )}\n      </div>\n\n      {/* Status Message */}\n      <div className=\"text-center mt-4\">\n        <p className=\"text-sm text-slate-600 font-medium\">\n          {currentStatus.message}\n        </p>\n\n        {/* Additional context based on state */}\n        {state === \"listening\" && (\n          <p className=\"text-xs text-green-600 mt-1\">\n            Speak naturally and take your time to respond\n          </p>\n        )}\n\n        {state === \"thinking\" && (\n          <p className=\"text-xs text-amber-600 mt-1\">\n            Processing your response to provide relevant follow-up\n          </p>\n        )}\n\n        {!isMicEnabled && (\n          <p className=\"text-xs text-red-600 mt-1\">\n            Please unmute your microphone to continue\n          </p>\n        )}\n      </div>\n\n      {/* Audio Quality Metrics */}\n      <div className=\"mt-4 grid grid-cols-2 gap-3 text-xs\">\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50\">\n          <div className=\"text-slate-500 mb-1\">Audio Quality</div>\n          <div className=\"font-semibold text-slate-700\">\n            {isMicEnabled ? \"Excellent\" : \"No Input\"}\n          </div>\n        </div>\n        <div className=\"bg-white/70 backdrop-blur-sm rounded-lg p-3 border border-white/50\">\n          <div className=\"text-slate-500 mb-1\">Session Time</div>\n          <div className=\"font-mono font-semibold text-slate-700\">\n            {Math.floor(sessionDuration / 60)}:\n            {(sessionDuration % 60).toString().padStart(2, \"0\")}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;;;;;AAOO,SAAS,mBAAmB,EACjC,YAAY,EACZ,eAAe,EACS;;IACxB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,2NAAA,CAAA,oBAAiB,AAAD;IAClC,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE,GAAG,CAAA,GAAA,qKAAA,CAAA,wBAAqB,AAAD,EAAE;IAEhE,MAAM,aAAa;QACjB,MAAM;YAAE,SAAS;QAA6B;QAC9C,WAAW;YAAE,SAAS;QAAsC;QAC5D,UAAU;YAAE,SAAS;QAA0B;QAC/C,UAAU;YAAE,SAAS;QAA+B;QACpD,cAAc;YAAE,SAAS;QAA0B;IACrD;IAEA,MAAM,gBACJ,UAAU,CAAC,MAAiC,IAAI,WAAW,IAAI;IAEjE,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAuC;;;;;;kCAGrD,6LAAC;wBACC,WAAW,CAAC,6CAA6C,EACvD,eAAe,iBAAiB,cAChC;;0CAEF,6LAAC;gCACC,WAAW,CAAC,mCAAmC,EAC7C,eAAe,iBAAiB,cAChC;;;;;;0CAEJ,6LAAC;gCACC,WAAW,CAAC,oBAAoB,EAC9B,eAAe,mBAAmB,gBAClC;0CAED,eAAe,WAAW;;;;;;;;;;;;;;;;;;0BAMjC,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAI,WAAU;;;;;;;;;;;;kCAIjB,6LAAC;wBAAI,WAAU;kCACZ,YAAY,GAAG,CAAC,CAAC,OAAO,kBACvB,6LAAC;gCAEC,WAAW,CAAC,6CAA6C,EACvD,gBAAgB,QAAQ,MACpB,iDACA,8CACJ;gCACF,OAAO;oCACL,QAAQ,GAAG,KAAK,GAAG,CAAC,GAAG,QAAQ,IAAI,CAAC,CAAC;oCACrC,SAAS,eAAe,MAAM,QAAQ,MAAM;gCAC9C;+BATK;;;;;;;;;;oBAeV,kCACC,6LAAC;wBAAI,WAAU;;;;;;oBAIhB,8BACC,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAKnB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCACV,cAAc,OAAO;;;;;;oBAIvB,UAAU,6BACT,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;oBAK5C,UAAU,4BACT,6LAAC;wBAAE,WAAU;kCAA8B;;;;;;oBAK5C,CAAC,8BACA,6LAAC;wBAAE,WAAU;kCAA4B;;;;;;;;;;;;0BAO7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAsB;;;;;;0CACrC,6LAAC;gCAAI,WAAU;0CACZ,eAAe,cAAc;;;;;;;;;;;;kCAGlC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAsB;;;;;;0CACrC,6LAAC;gCAAI,WAAU;;oCACZ,KAAK,KAAK,CAAC,kBAAkB;oCAAI;oCACjC,CAAC,kBAAkB,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;AAM3D;GA/HgB;;QAII,2NAAA,CAAA,oBAAiB;QACO,qKAAA,CAAA,wBAAqB;;;KALjD","debugId":null}},
    {"offset": {"line": 2808, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/hooks/useMediaControls.ts"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\nimport { Track } from \"livekit-client\";\nimport { useLocalParticipant } from \"@livekit/components-react\";\n\nexport function useMediaControls() {\n  const { localParticipant } = useLocalParticipant();\n  const [isMicEnabled, setIsMicEnabled] = useState(true);\n  const [isCameraEnabled, setIsCameraEnabled] = useState(true);\n  const [isScreenSharing, setIsScreenSharing] = useState(false);\n  const [isVideoFullscreen, setIsVideoFullscreen] = useState(false);\n\n  // Detect mobile device\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n  // Sync state with actual track states\n  useEffect(() => {\n    const micPublication = localParticipant.getTrackPublication(Track.Source.Microphone);\n    const cameraPublication = localParticipant.getTrackPublication(Track.Source.Camera);\n    const screenPublication = localParticipant.getTrackPublication(Track.Source.ScreenShare);\n\n    setIsMicEnabled(micPublication?.isEnabled ?? true);\n    setIsCameraEnabled(cameraPublication?.isEnabled ?? true);\n    setIsScreenSharing(screenPublication?.isEnabled ?? false);\n  }, [localParticipant]);\n\n  const toggleMicrophone = useCallback(async () => {\n    try {\n      // Add mobile-specific handling to prevent crashes\n      if (isMobile) {\n        // Small delay on mobile to prevent rapid state changes\n        await new Promise(resolve => setTimeout(resolve, 100));\n      }\n\n      await localParticipant.setMicrophoneEnabled(!isMicEnabled);\n      setIsMicEnabled(!isMicEnabled);\n    } catch (error) {\n      console.error(\"Failed to toggle microphone:\", error);\n      // Try to recover the state if toggle fails\n      const micPublication = localParticipant.getTrackPublication(Track.Source.Microphone);\n      setIsMicEnabled(micPublication?.isEnabled ?? false);\n    }\n  }, [localParticipant, isMicEnabled, isMobile]);\n\n  const toggleCamera = useCallback(async () => {\n    try {\n      if (!isCameraEnabled) {\n        // Use lower resolution on mobile to reduce memory usage\n        const constraints = isMobile ?\n          { resolution: { width: 640, height: 480, frameRate: 15 } } :\n          { resolution: { width: 1280, height: 720, frameRate: 30 } };\n\n        await localParticipant.setCameraEnabled(true, constraints);\n      } else {\n        await localParticipant.setCameraEnabled(false);\n      }\n      setIsCameraEnabled(!isCameraEnabled);\n    } catch (error) {\n      console.error(\"Failed to toggle camera:\", error);\n    }\n  }, [localParticipant, isCameraEnabled, isMobile]);\n\n  const toggleScreenShare = useCallback(async () => {\n    try {\n      if (!isScreenSharing) {\n        // Use lower settings on mobile for screen sharing\n        const constraints = isMobile ?\n          { resolution: { width: 1280, height: 720, frameRate: 10 } } :\n          { resolution: { width: 2560, height: 1440, frameRate: 15 } };\n\n        await localParticipant.setScreenShareEnabled(true, constraints);\n      } else {\n        await localParticipant.setScreenShareEnabled(false);\n      }\n      setIsScreenSharing(!isScreenSharing);\n    } catch (error) {\n      console.error(\"Failed to toggle screen share:\", error);\n    }\n  }, [localParticipant, isScreenSharing, isMobile]);\n\n  const toggleFullscreen = useCallback(async () => {\n    const videoContainer = document.querySelector('.video-container') as HTMLElement;\n\n    if (!document.fullscreenElement) {\n      try {\n        await videoContainer?.requestFullscreen();\n        setIsVideoFullscreen(true);\n      } catch (err) {\n        console.error('Failed to enter fullscreen:', err);\n        setIsVideoFullscreen(true);\n      }\n    } else {\n      try {\n        await document.exitFullscreen();\n        setIsVideoFullscreen(false);\n      } catch (err) {\n        console.error('Failed to exit fullscreen:', err);\n        setIsVideoFullscreen(false);\n      }\n    }\n  }, []);\n\n  // Handle fullscreen changes and escape key\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isVideoFullscreen) {\n        setIsVideoFullscreen(false);\n      }\n    };\n\n    const handleFullscreenChange = () => {\n      setIsVideoFullscreen(!!document.fullscreenElement);\n    };\n\n    document.addEventListener('keydown', handleKeyPress);\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyPress);\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, [isVideoFullscreen]);\n\n  // Get current tracks\n  const localVideoTrack = localParticipant.getTrackPublication(Track.Source.Camera)?.track;\n  const localScreenTrack = localParticipant.getTrackPublication(Track.Source.ScreenShare)?.track;\n  const displayTrack = localScreenTrack || localVideoTrack;\n  const displaySource = localScreenTrack ? Track.Source.ScreenShare : Track.Source.Camera;\n\n  return {\n    // State\n    isMicEnabled,\n    isCameraEnabled,\n    isScreenSharing,\n    isVideoFullscreen,\n    localVideoTrack,\n    localScreenTrack,\n    displayTrack,\n    displaySource,\n\n    // Actions\n    toggleMicrophone,\n    toggleCamera,\n    toggleScreenShare,\n    toggleFullscreen,\n\n    // Direct setters\n    setIsVideoFullscreen\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3015, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/components/InterviewLayout.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { XMarkIcon } from \"@heroicons/react/24/outline\";\nimport { InterviewHeader } from \"./InterviewHeader\";\nimport { VideoPanel } from \"./VideoPanel\";\nimport { AIAssistantPanel } from \"./AIAssistantPanel\";\nimport { AudioVisualization } from \"./AudioVisualization\";\nimport { useMediaControls } from \"../hooks/useMediaControls\";\n\ninterface JobInfo {\n  title?: string;\n  department?: string;\n  level?: string;\n  location?: string;\n  experience?: string;\n}\n\ninterface CompanyInfo {\n  name?: string;\n  logo?: string;\n}\n\ninterface InterviewLayoutProps {\n  jobInfo?: JobInfo;\n  companyInfo?: CompanyInfo;\n  participantName?: string;\n}\n\nexport function InterviewLayout({\n  jobInfo,\n  companyInfo,\n  participantName,\n}: InterviewLayoutProps) {\n  const [sessionDuration, setSessionDuration] = useState(0);\n  const [showExitModal, setShowExitModal] = useState(false);\n  const mediaControls = useMediaControls();\n  const router = useRouter();\n\n  const handleCloseInterview = () => {\n    setShowExitModal(true);\n  };\n\n  const confirmExit = () => {\n    // Clean up resources before leaving\n    try {\n      // Stop all media tracks\n      navigator.mediaDevices\n        .getUserMedia({ audio: true, video: true })\n        .then((stream) => {\n          stream.getTracks().forEach((track) => track.stop());\n        })\n        .catch(() => {\n          // Ignore errors if no stream exists\n        });\n    } catch (error) {\n      console.warn(\"Error cleaning up media:\", error);\n    }\n\n    // Navigate back to jobs or dashboard\n    router.push(\"/jobs\");\n  };\n\n  // Session timer\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setSessionDuration((prev) => prev + 1);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  // Mobile cleanup effect to prevent memory leaks\n  useEffect(() => {\n    const isMobile =\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      );\n\n    if (!isMobile) {\n      return; // No cleanup needed for desktop\n    }\n\n    // Add mobile-specific cleanup\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        console.log(\"ðŸ“± App backgrounded on mobile, maintaining minimal state\");\n      } else {\n        console.log(\"ðŸ“± App foregrounded on mobile, resuming normal operation\");\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, []);\n\n  return (\n    <div className=\"relative z-10 flex-1 flex items-center justify-center p-0 sm:p-2 lg:p-6 xl:p-8\">\n      <div className=\"w-full max-w-7xl mx-auto animate-in slide-in-from-bottom-4 duration-700\">\n        {/* Enhanced Professional Header - Minimal on mobile */}\n        <InterviewHeader\n          jobInfo={jobInfo}\n          companyInfo={companyInfo}\n          {...(participantName && { participantName })}\n          sessionDuration={sessionDuration}\n        />\n\n        {/* Main Content Grid - Full screen video on mobile */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-0 lg:gap-6 p-0 lg:p-6 bg-transparent sm:bg-white/95 backdrop-blur-none sm:backdrop-blur-xl rounded-none sm:rounded-b-xl lg:rounded-b-3xl shadow-none sm:shadow-2xl border-0 sm:border border-white/30\">\n          {/* Video Section - Almost full screen on mobile */}\n          <div className=\"xl:col-span-2 space-y-3 lg:space-y-6 order-1 px-4 sm:px-0\">\n            <VideoPanel mediaControls={mediaControls} />\n\n            {/* End Interview Button - Standard red button */}\n            <div className=\"flex justify-center\">\n              <button\n                onClick={handleCloseInterview}\n                className=\"px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl shadow-lg transition-all duration-200 flex items-center gap-2 min-w-[160px] justify-center\"\n              >\n                <XMarkIcon className=\"w-5 h-5\" />\n                End Interview\n              </button>\n            </div>\n\n            {/* Hide audio visualization on mobile to save space and prevent crashes */}\n            <div className=\"hidden sm:block\">\n              <AudioVisualization\n                isMicEnabled={mediaControls.isMicEnabled}\n                sessionDuration={sessionDuration}\n              />\n            </div>\n          </div>\n\n          {/* AI Assistant Panel - Hidden on mobile screens */}\n          <div className=\"hidden lg:block order-first xl:order-last\">\n            <AIAssistantPanel sessionDuration={sessionDuration} />\n          </div>\n        </div>\n      </div>\n\n      {/* Exit Interview Modal */}\n      {showExitModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n          <div className=\"bg-white rounded-2xl p-6 mx-4 max-w-sm w-full shadow-2xl\">\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <XMarkIcon className=\"w-6 h-6 text-red-600\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                End Interview?\n              </h3>\n              <p className=\"text-gray-600 mb-6\">\n                Are you sure you want to leave the interview? This action cannot\n                be undone.\n              </p>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => setShowExitModal(false)}\n                  className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-xl font-medium hover:bg-gray-300 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={confirmExit}\n                  className=\"flex-1 px-4 py-2 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-colors\"\n                >\n                  Leave\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAqBO,SAAS,gBAAgB,EAC9B,OAAO,EACP,WAAW,EACX,eAAe,EACM;;IACrB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,mBAAgB,AAAD;IACrC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,uBAAuB;QAC3B,iBAAiB;IACnB;IAEA,MAAM,cAAc;QAClB,oCAAoC;QACpC,IAAI;YACF,wBAAwB;YACxB,UAAU,YAAY,CACnB,YAAY,CAAC;gBAAE,OAAO;gBAAM,OAAO;YAAK,GACxC,IAAI,CAAC,CAAC;gBACL,OAAO,SAAS,GAAG,OAAO,CAAC,CAAC,QAAU,MAAM,IAAI;YAClD,GACC,KAAK,CAAC;YACL,oCAAoC;YACtC;QACJ,EAAE,OAAO,OAAO;YACd,QAAQ,IAAI,CAAC,4BAA4B;QAC3C;QAEA,qCAAqC;QACrC,OAAO,IAAI,CAAC;IACd;IAEA,gBAAgB;IAChB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,MAAM,QAAQ;mDAAY;oBACxB;2DAAmB,CAAC,OAAS,OAAO;;gBACtC;kDAAG;YACH;6CAAO,IAAM,cAAc;;QAC7B;oCAAG,EAAE;IAEL,gDAAgD;IAChD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;qCAAE;YACR,MAAM,WACJ,iEAAiE,IAAI,CACnE,UAAU,SAAS;YAGvB,IAAI,CAAC,UAAU;gBACb,QAAQ,gCAAgC;YAC1C;YAEA,8BAA8B;YAC9B,MAAM;oEAAyB;oBAC7B,IAAI,SAAS,MAAM,EAAE;wBACnB,QAAQ,GAAG,CAAC;oBACd,OAAO;wBACL,QAAQ,GAAG,CAAC;oBACd;gBACF;;YAEA,SAAS,gBAAgB,CAAC,oBAAoB;YAE9C;6CAAO;oBACL,SAAS,mBAAmB,CAAC,oBAAoB;gBACnD;;QACF;oCAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,qKAAA,CAAA,kBAAe;wBACd,SAAS;wBACT,aAAa;wBACZ,GAAI,mBAAmB;4BAAE;wBAAgB,CAAC;wBAC3C,iBAAiB;;;;;;kCAInB,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,gKAAA,CAAA,aAAU;wCAAC,eAAe;;;;;;kDAG3B,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CACC,SAAS;4CACT,WAAU;;8DAEV,6LAAC,oNAAA,CAAA,YAAS;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;kDAMrC,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,wKAAA,CAAA,qBAAkB;4CACjB,cAAc,cAAc,YAAY;4CACxC,iBAAiB;;;;;;;;;;;;;;;;;0CAMvB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,sKAAA,CAAA,mBAAgB;oCAAC,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;YAMxC,+BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,oNAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;;;;;;0CAEvB,6LAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,6LAAC;gCAAE,WAAU;0CAAqB;;;;;;0CAIlC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS,IAAM,iBAAiB;wCAChC,WAAU;kDACX;;;;;;kDAGD,6LAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjB;GApJgB;;QAOQ,gKAAA,CAAA,mBAAgB;QACvB,qIAAA,CAAA,YAAS;;;KARV","debugId":null}},
    {"offset": {"line": 3312, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/hooks/useInterviewState.ts"],"sourcesContent":["import { useState, useCallback } from \"react\";\n\ninterface JobInfo {\n  title?: string;\n  location?: string;\n  experience?: string;\n}\n\ninterface CompanyInfo {\n  name?: string;\n  logo?: string;\n}\n\nexport function useInterviewState() {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [needsPermission, setNeedsPermission] = useState(true);\n  const [participantName, setParticipantName] = useState<string>(\"\");\n  const [companyInfo, setCompanyInfo] = useState<CompanyInfo | null>(null);\n  const [jobInfo, setJobInfo] = useState<JobInfo | null>(null);\n\n  const handleStartInterview = useCallback(async () => {\n    console.log(\"ðŸŽ¬ Starting interview setup...\");\n    \n    try {\n      // Try to get full media access first\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n      stream.getTracks().forEach((track) => track.stop());\n      console.log(\"âœ… Full media permissions granted\");\n      setNeedsPermission(false);\n      setError(null);\n      return;\n    } catch (fullMediaError) {\n      console.warn(\"âš ï¸ Full media access denied, trying audio-only...\", fullMediaError);\n    }\n\n    try {\n      // Try audio-only access\n      const audioStream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: false,\n      });\n      audioStream.getTracks().forEach((track) => track.stop());\n      console.log(\"âœ… Audio-only permissions granted\");\n      setNeedsPermission(false);\n      setError(null);\n      return;\n    } catch (audioError) {\n      console.warn(\"âš ï¸ Audio access also denied, proceeding without media...\", audioError);\n    }\n\n    // Proceed even without any media permissions\n    // The backend room creation and connection should still work\n    console.log(\"â„¹ï¸ Proceeding without media permissions\");\n    setNeedsPermission(false);\n    setError(null);\n  }, []);\n\n  const updateConnectionState = useCallback((connected: boolean, connecting: boolean) => {\n    setIsConnected(connected);\n    setIsConnecting(connecting);\n  }, []);\n\n  const updateError = useCallback((errorMessage: string | null) => {\n    setError(errorMessage);\n  }, []);\n\n  const updateJobData = useCallback((jobData: JobInfo, companyData: CompanyInfo, participantData: string) => {\n    if (jobData) setJobInfo(jobData);\n    if (companyData) setCompanyInfo(companyData);\n    if (participantData) setParticipantName(participantData);\n  }, []);\n\n  return {\n    // State\n    isConnected,\n    isConnecting,\n    error,\n    needsPermission,\n    participantName,\n    companyInfo,\n    jobInfo,\n    \n    // Actions\n    handleStartInterview,\n    setNeedsPermission,\n    updateConnectionState,\n    updateError,\n    updateJobData,\n    \n    // Setters for direct updates\n    setIsConnected,\n    setIsConnecting,\n    setError,\n    setParticipantName,\n    setCompanyInfo,\n    setJobInfo\n  };\n}"],"names":[],"mappings":";;;AAAA;;;AAaO,SAAS;;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAC/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAsB;IACnE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAkB;IAEvD,MAAM,uBAAuB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;+DAAE;YACvC,QAAQ,GAAG,CAAC;YAEZ,IAAI;gBACF,qCAAqC;gBACrC,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;oBACvD,OAAO;oBACP,OAAO;gBACT;gBACA,OAAO,SAAS,GAAG,OAAO;2EAAC,CAAC,QAAU,MAAM,IAAI;;gBAChD,QAAQ,GAAG,CAAC;gBACZ,mBAAmB;gBACnB,SAAS;gBACT;YACF,EAAE,OAAO,gBAAgB;gBACvB,QAAQ,IAAI,CAAC,qDAAqD;YACpE;YAEA,IAAI;gBACF,wBAAwB;gBACxB,MAAM,cAAc,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;oBAC5D,OAAO;oBACP,OAAO;gBACT;gBACA,YAAY,SAAS,GAAG,OAAO;2EAAC,CAAC,QAAU,MAAM,IAAI;;gBACrD,QAAQ,GAAG,CAAC;gBACZ,mBAAmB;gBACnB,SAAS;gBACT;YACF,EAAE,OAAO,YAAY;gBACnB,QAAQ,IAAI,CAAC,4DAA4D;YAC3E;YAEA,6CAA6C;YAC7C,6DAA6D;YAC7D,QAAQ,GAAG,CAAC;YACZ,mBAAmB;YACnB,SAAS;QACX;8DAAG,EAAE;IAEL,MAAM,wBAAwB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;gEAAE,CAAC,WAAoB;YAC7D,eAAe;YACf,gBAAgB;QAClB;+DAAG,EAAE;IAEL,MAAM,cAAc,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;sDAAE,CAAC;YAC/B,SAAS;QACX;qDAAG,EAAE;IAEL,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;wDAAE,CAAC,SAAkB,aAA0B;YAC7E,IAAI,SAAS,WAAW;YACxB,IAAI,aAAa,eAAe;YAChC,IAAI,iBAAiB,mBAAmB;QAC1C;uDAAG,EAAE;IAEL,OAAO;QACL,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA;QAEA,UAAU;QACV;QACA;QACA;QACA;QACA;QAEA,6BAA6B;QAC7B;QACA;QACA;QACA;QACA;QACA;IACF;AACF;GAzFgB","debugId":null}},
    {"offset": {"line": 3421, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/lib/config.ts"],"sourcesContent":["export const API_CONFIG = {\n  API_BASE_URL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4008/api\",\n  LIVEKIT_URL: process.env.LIVEKIT_URL || \"wss://widdai-aphl2lb9.livekit.cloud\",\n  LIVEKIT_API_KEY: process.env.LIVEKIT_API_KEY || \"\",\n  LIVEKIT_SECRET_KEY: process.env.LIVEKIT_SECRET_KEY || \"\",\n};"],"names":[],"mappings":";;;AACgB;AADT,MAAM,aAAa;IACxB,cAAc,iEAAmC;IACjD,aAAa,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,WAAW,IAAI;IACxC,iBAAiB,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,eAAe,IAAI;IAChD,oBAAoB,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,kBAAkB,IAAI;AACxD","debugId":null}},
    {"offset": {"line": 3440, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/hooks/useRoomConnection.ts"],"sourcesContent":["import { useCallback, useEffect, useRef } from \"react\";\nimport { Room } from \"livekit-client\";\nimport { ReadonlyURLSearchParams } from \"next/navigation\";\nimport { API_CONFIG } from \"@/lib/config\";\n\ninterface JobInfo {\n  title?: string;\n  location?: string;\n  experience?: string;\n}\n\ninterface CompanyInfo {\n  name?: string;\n  logo?: string;\n}\n\ninterface UseRoomConnectionProps {\n  room: Room;\n  searchParams: ReadonlyURLSearchParams;\n  onConnectionChange: (connected: boolean, connecting: boolean) => void;\n  onError: (error: string | null) => void;\n  onJobDataUpdate?: (jobData: JobInfo, companyData: CompanyInfo, participantData: string) => void;\n  userId?: string;\n  roomId?: string;\n}\n\nexport function useRoomConnection({\n  room,\n  searchParams,\n  onConnectionChange,\n  onError,\n  onJobDataUpdate,\n  userId,\n  roomId\n}: UseRoomConnectionProps) {\n  const isConnectingRef = useRef(false);\n\n  const connectToRoom = useCallback(async () => {\n    if (isConnectingRef.current) {\n      console.log(\"âš ï¸ Connection already in progress, skipping...\");\n      return;\n    }\n    try {\n      isConnectingRef.current = true;\n      console.log(\"ðŸ”„ Starting room connection...\");\n      onConnectionChange(false, true);\n      onError(null);\n\n      // Extract connection parameters\n      const directToken = searchParams.get(\"token\");\n      const directRoomName = searchParams.get(\"roomName\");\n      const directServerUrl = searchParams.get(\"serverUrl\");\n\n      console.log(\"ðŸ“‹ Connection parameters:\", {\n        directToken: !!directToken,\n        directRoomName,\n        directServerUrl,\n        roomId\n      });\n\n      let token = directToken;\n      let roomName = directRoomName || roomId; // Use roomId if no direct room name\n      let serverUrl = directServerUrl || \"wss://widdai-aphl2lb9.livekit.cloud\";\n\n      // Create room via backend if needed\n      if (!token) {\n        console.log(\"ðŸ—ï¸ Creating room via backend...\");\n        \n        // Get user ID from props or URL params\n        const userIdFromUrl = searchParams.get(\"userId\");\n        const roomNameFromUrl = searchParams.get(\"roomName\");\n        \n        // Determine language from locale\n        const locale = window.location.pathname.split('/')[1];\n        const language = locale === 'ar' ? 'arabic' : 'english';\n        \n        const requestBody: any = { language };\n        if (userId || userIdFromUrl) requestBody.userId = userId || userIdFromUrl;\n        if (roomNameFromUrl) requestBody.roomName = roomNameFromUrl;\n        \n        console.log(\"ðŸ“‹ Room creation payload:\", requestBody);\n        \n        const createResponse = await fetch(\n          `${API_CONFIG.API_BASE_URL}/rooms`,\n          {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify(requestBody),\n          }\n        );\n\n        if (!createResponse.ok) {\n          throw new Error(`Failed to create room: ${await createResponse.text()}`);\n        }\n\n        const createData = await createResponse.json();\n        console.log(\"âœ… Room created successfully:\", createData);\n\n        token = createData.token;\n        roomName = createData.room?.name;\n        serverUrl = createData.liveKitUrl;\n\n        console.log(\"ðŸ” Extracted connection details:\", {\n          token: !!token,\n          roomName,\n          serverUrl,\n          language: createData.language,\n          roomType: createData.room?.metadata?.type\n        });\n\n        // Extract skincare consultation data from backend response\n        if (onJobDataUpdate) {\n          // For skincare consultation, we'll use different data structure\n          const jobData = {\n            title: createData.room?.metadata?.type === 'skincare_consultation' ? \n              (createData.language === 'arabic' ? 'Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø©' : 'Skincare Consultation') : \n              'Consultation',\n            location: null,\n            experience: null\n          };\n\n          const companyData = {\n            name: 'Skinior',\n            logo: undefined\n          };\n\n          const participantData = createData.participantName || `User ${createData.room?.metadata?.createdBy || 'Guest'}`;\n\n          console.log(\"ðŸ“Š Extracted skincare data:\", { jobData, companyData, participantData });\n          onJobDataUpdate(jobData, companyData, participantData);\n        }\n      }\n\n      if (!token || !roomName) {\n        console.error(\"âŒ Missing required parameters:\", { token: !!token, roomName });\n        throw new Error(`Missing required parameters - token: ${!!token}, roomName: ${!!roomName}`);\n      }\n\n      console.log(\"ðŸš€ Connecting to LiveKit room:\", { roomName, serverUrl });\n\n      // Setup room event listeners\n      room.removeAllListeners();\n\n      // Add mobile-specific error handling\n      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n      room.on(\"connected\", () => {\n        console.log(\"âœ… Room connected successfully\");\n        isConnectingRef.current = false;\n        onConnectionChange(true, false);\n      });\n\n      room.on(\"disconnected\", (reason) => {\n        console.log(\"âŒ Room disconnected:\", reason);\n        isConnectingRef.current = false;\n        onConnectionChange(false, false);\n\n        // Handle mobile-specific disconnection scenarios\n        if (isMobile) {\n          console.log(\"ðŸ”„ Mobile disconnection detected, preparing for potential recovery...\");\n          setTimeout(() => {\n            if (room.state !== 'connected') {\n              console.log(\"ðŸ”„ Room still disconnected on mobile device\");\n              // Don't automatically reconnect to avoid loops, let user retry\n            }\n          }, 2000);\n        }\n      });\n\n      room.on(\"reconnecting\", () => {\n        console.log(\"ðŸ”„ Room reconnecting...\");\n        onConnectionChange(false, true);\n      });\n\n      room.on(\"reconnected\", () => {\n        console.log(\"âœ… Room reconnected\");\n        isConnectingRef.current = false;\n        onConnectionChange(true, false);\n      });\n\n      // Add mobile-specific connection error handling\n      room.on(\"connectionQualityChanged\", (quality) => {\n        if (isMobile && quality === 'poor') {\n          console.warn(\"âš ï¸ Poor connection quality detected on mobile device\");\n          // Could implement automatic quality reduction here\n        }\n      });\n\n      // Connect to room with mobile-optimized settings\n      const connectionConfig = {\n        autoSubscribe: true,\n        rtcConfig: {\n          iceServers: [\n            { urls: \"stun:stun.l.google.com:19302\" },\n            { urls: \"stun:stun1.l.google.com:19302\" },\n          ],\n          // Add mobile-specific ICE configuration\n          ...(isMobile && {\n            iceTransportPolicy: 'all' as RTCIceTransportPolicy,\n            bundlePolicy: 'max-bundle' as RTCBundlePolicy,\n            rtcpMuxPolicy: 'require' as RTCRtcpMuxPolicy,\n          }),\n        },\n        // Mobile-specific audio optimizations for better clarity\n        ...(isMobile && {\n          audioCaptureDefaults: {\n            echoCancellation: true,\n            noiseSuppression: true,\n            autoGainControl: true,\n            sampleRate: 48000, // Higher sample rate for better quality\n            channelCount: 1, // Mono to reduce bandwidth\n          },\n          audioPlaybackDefaults: {\n            autoGainControl: false, // Disable AGC for playback\n            echoCancellation: false, // Not needed for playback\n            noiseSuppression: false, // Not needed for playback\n          },\n        }),\n      };\n\n      await room.connect(serverUrl, token, connectionConfig);\n\n      console.log(\"ðŸŽ¤ðŸ“¹ Attempting to enable microphone and camera...\");\n      // Enable media with graceful fallback and simplified mobile handling\n      try {\n        // Simplified microphone settings to prevent crashes\n        const micOptions = isMobile ?\n          { echoCancellation: true, noiseSuppression: true } :\n          { echoCancellation: true, noiseSuppression: true, autoGainControl: true };\n\n        await room.localParticipant.setMicrophoneEnabled(true, micOptions);\n        console.log(\"âœ… Microphone enabled successfully\");\n      } catch (micError) {\n        console.warn(\"âš ï¸ Could not enable microphone:\", micError);\n        // Try with basic settings if advanced ones fail\n        try {\n          await room.localParticipant.setMicrophoneEnabled(true);\n          console.log(\"âœ… Microphone enabled with basic settings\");\n        } catch (basicMicError) {\n          console.error(\"âŒ Failed to enable microphone with basic settings:\", basicMicError);\n        }\n      }\n\n      try {\n        const cameraConstraints = isMobile ?\n          { resolution: { width: 640, height: 480, frameRate: 15 } } :\n          { resolution: { width: 1280, height: 720, frameRate: 30 } };\n\n        await room.localParticipant.setCameraEnabled(true, cameraConstraints);\n        console.log(\"âœ… Camera enabled successfully\");\n      } catch (camError) {\n        console.warn(\"âš ï¸ Could not enable camera:\", camError);\n      }\n\n      console.log(\"âœ… Room connection completed (media may be limited)\");\n\n    } catch (err: unknown) {\n      console.error(\"ðŸ’¥ Connection failed:\", err);\n      isConnectingRef.current = false;\n\n      // Provide mobile-specific error messages\n      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n      const error = err as Error;\n      let errorMessage = error.message || \"Failed to connect to room\";\n\n      if (isMobile) {\n        if (error.message?.includes('websocket') || error.message?.includes('network')) {\n          errorMessage = \"Mobile connection issue detected. Please check your internet connection and try again.\";\n        } else if (error.message?.includes('media') || error.message?.includes('camera') || error.message?.includes('microphone')) {\n          errorMessage = \"Camera or microphone access failed. Please check permissions and try again.\";\n        }\n      }\n\n      onError(errorMessage);\n      onConnectionChange(false, false);\n    }\n  }, [room, searchParams, onConnectionChange, onError, onJobDataUpdate]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      e.preventDefault();\n      return \"Are you sure you want to leave? This will end the interview.\";\n    };\n\n    window.addEventListener(\"beforeunload\", handleBeforeUnload);\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleBeforeUnload);\n      room.disconnect();\n    };\n  }, [room]);\n\n  return { connectToRoom };\n}"],"names":[],"mappings":";;;AAAA;AAGA;;;;AAuBO,SAAS,kBAAkB,EAChC,IAAI,EACJ,YAAY,EACZ,kBAAkB,EAClB,OAAO,EACP,eAAe,EACf,MAAM,EACN,MAAM,EACiB;;IACvB,MAAM,kBAAkB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAE/B,MAAM,gBAAgB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;wDAAE;YAChC,IAAI,gBAAgB,OAAO,EAAE;gBAC3B,QAAQ,GAAG,CAAC;gBACZ;YACF;YACA,IAAI;gBACF,gBAAgB,OAAO,GAAG;gBAC1B,QAAQ,GAAG,CAAC;gBACZ,mBAAmB,OAAO;gBAC1B,QAAQ;gBAER,gCAAgC;gBAChC,MAAM,cAAc,aAAa,GAAG,CAAC;gBACrC,MAAM,iBAAiB,aAAa,GAAG,CAAC;gBACxC,MAAM,kBAAkB,aAAa,GAAG,CAAC;gBAEzC,QAAQ,GAAG,CAAC,6BAA6B;oBACvC,aAAa,CAAC,CAAC;oBACf;oBACA;oBACA;gBACF;gBAEA,IAAI,QAAQ;gBACZ,IAAI,WAAW,kBAAkB,QAAQ,oCAAoC;gBAC7E,IAAI,YAAY,mBAAmB;gBAEnC,oCAAoC;gBACpC,IAAI,CAAC,OAAO;oBACV,QAAQ,GAAG,CAAC;oBAEZ,uCAAuC;oBACvC,MAAM,gBAAgB,aAAa,GAAG,CAAC;oBACvC,MAAM,kBAAkB,aAAa,GAAG,CAAC;oBAEzC,iCAAiC;oBACjC,MAAM,SAAS,OAAO,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;oBACrD,MAAM,WAAW,WAAW,OAAO,WAAW;oBAE9C,MAAM,cAAmB;wBAAE;oBAAS;oBACpC,IAAI,UAAU,eAAe,YAAY,MAAM,GAAG,UAAU;oBAC5D,IAAI,iBAAiB,YAAY,QAAQ,GAAG;oBAE5C,QAAQ,GAAG,CAAC,6BAA6B;oBAEzC,MAAM,iBAAiB,MAAM,MAC3B,GAAG,uHAAA,CAAA,aAAU,CAAC,YAAY,CAAC,MAAM,CAAC,EAClC;wBACE,QAAQ;wBACR,SAAS;4BAAE,gBAAgB;wBAAmB;wBAC9C,MAAM,KAAK,SAAS,CAAC;oBACvB;oBAGF,IAAI,CAAC,eAAe,EAAE,EAAE;wBACtB,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,eAAe,IAAI,IAAI;oBACzE;oBAEA,MAAM,aAAa,MAAM,eAAe,IAAI;oBAC5C,QAAQ,GAAG,CAAC,gCAAgC;oBAE5C,QAAQ,WAAW,KAAK;oBACxB,WAAW,WAAW,IAAI,EAAE;oBAC5B,YAAY,WAAW,UAAU;oBAEjC,QAAQ,GAAG,CAAC,oCAAoC;wBAC9C,OAAO,CAAC,CAAC;wBACT;wBACA;wBACA,UAAU,WAAW,QAAQ;wBAC7B,UAAU,WAAW,IAAI,EAAE,UAAU;oBACvC;oBAEA,2DAA2D;oBAC3D,IAAI,iBAAiB;wBACnB,gEAAgE;wBAChE,MAAM,UAAU;4BACd,OAAO,WAAW,IAAI,EAAE,UAAU,SAAS,0BACxC,WAAW,QAAQ,KAAK,WAAW,4BAA4B,0BAChE;4BACF,UAAU;4BACV,YAAY;wBACd;wBAEA,MAAM,cAAc;4BAClB,MAAM;4BACN,MAAM;wBACR;wBAEA,MAAM,kBAAkB,WAAW,eAAe,IAAI,CAAC,KAAK,EAAE,WAAW,IAAI,EAAE,UAAU,aAAa,SAAS;wBAE/G,QAAQ,GAAG,CAAC,+BAA+B;4BAAE;4BAAS;4BAAa;wBAAgB;wBACnF,gBAAgB,SAAS,aAAa;oBACxC;gBACF;gBAEA,IAAI,CAAC,SAAS,CAAC,UAAU;oBACvB,QAAQ,KAAK,CAAC,kCAAkC;wBAAE,OAAO,CAAC,CAAC;wBAAO;oBAAS;oBAC3E,MAAM,IAAI,MAAM,CAAC,qCAAqC,EAAE,CAAC,CAAC,MAAM,YAAY,EAAE,CAAC,CAAC,UAAU;gBAC5F;gBAEA,QAAQ,GAAG,CAAC,kCAAkC;oBAAE;oBAAU;gBAAU;gBAEpE,6BAA6B;gBAC7B,KAAK,kBAAkB;gBAEvB,qCAAqC;gBACrC,MAAM,WAAW,iEAAiE,IAAI,CAAC,UAAU,SAAS;gBAE1G,KAAK,EAAE,CAAC;oEAAa;wBACnB,QAAQ,GAAG,CAAC;wBACZ,gBAAgB,OAAO,GAAG;wBAC1B,mBAAmB,MAAM;oBAC3B;;gBAEA,KAAK,EAAE,CAAC;oEAAgB,CAAC;wBACvB,QAAQ,GAAG,CAAC,wBAAwB;wBACpC,gBAAgB,OAAO,GAAG;wBAC1B,mBAAmB,OAAO;wBAE1B,iDAAiD;wBACjD,IAAI,UAAU;4BACZ,QAAQ,GAAG,CAAC;4BACZ;gFAAW;oCACT,IAAI,KAAK,KAAK,KAAK,aAAa;wCAC9B,QAAQ,GAAG,CAAC;oCACZ,+DAA+D;oCACjE;gCACF;+EAAG;wBACL;oBACF;;gBAEA,KAAK,EAAE,CAAC;oEAAgB;wBACtB,QAAQ,GAAG,CAAC;wBACZ,mBAAmB,OAAO;oBAC5B;;gBAEA,KAAK,EAAE,CAAC;oEAAe;wBACrB,QAAQ,GAAG,CAAC;wBACZ,gBAAgB,OAAO,GAAG;wBAC1B,mBAAmB,MAAM;oBAC3B;;gBAEA,gDAAgD;gBAChD,KAAK,EAAE,CAAC;oEAA4B,CAAC;wBACnC,IAAI,YAAY,YAAY,QAAQ;4BAClC,QAAQ,IAAI,CAAC;wBACb,mDAAmD;wBACrD;oBACF;;gBAEA,iDAAiD;gBACjD,MAAM,mBAAmB;oBACvB,eAAe;oBACf,WAAW;wBACT,YAAY;4BACV;gCAAE,MAAM;4BAA+B;4BACvC;gCAAE,MAAM;4BAAgC;yBACzC;wBACD,wCAAwC;wBACxC,GAAI,YAAY;4BACd,oBAAoB;4BACpB,cAAc;4BACd,eAAe;wBACjB,CAAC;oBACH;oBACA,yDAAyD;oBACzD,GAAI,YAAY;wBACd,sBAAsB;4BACpB,kBAAkB;4BAClB,kBAAkB;4BAClB,iBAAiB;4BACjB,YAAY;4BACZ,cAAc;wBAChB;wBACA,uBAAuB;4BACrB,iBAAiB;4BACjB,kBAAkB;4BAClB,kBAAkB;wBACpB;oBACF,CAAC;gBACH;gBAEA,MAAM,KAAK,OAAO,CAAC,WAAW,OAAO;gBAErC,QAAQ,GAAG,CAAC;gBACZ,qEAAqE;gBACrE,IAAI;oBACF,oDAAoD;oBACpD,MAAM,aAAa,WACjB;wBAAE,kBAAkB;wBAAM,kBAAkB;oBAAK,IACjD;wBAAE,kBAAkB;wBAAM,kBAAkB;wBAAM,iBAAiB;oBAAK;oBAE1E,MAAM,KAAK,gBAAgB,CAAC,oBAAoB,CAAC,MAAM;oBACvD,QAAQ,GAAG,CAAC;gBACd,EAAE,OAAO,UAAU;oBACjB,QAAQ,IAAI,CAAC,mCAAmC;oBAChD,gDAAgD;oBAChD,IAAI;wBACF,MAAM,KAAK,gBAAgB,CAAC,oBAAoB,CAAC;wBACjD,QAAQ,GAAG,CAAC;oBACd,EAAE,OAAO,eAAe;wBACtB,QAAQ,KAAK,CAAC,sDAAsD;oBACtE;gBACF;gBAEA,IAAI;oBACF,MAAM,oBAAoB,WACxB;wBAAE,YAAY;4BAAE,OAAO;4BAAK,QAAQ;4BAAK,WAAW;wBAAG;oBAAE,IACzD;wBAAE,YAAY;4BAAE,OAAO;4BAAM,QAAQ;4BAAK,WAAW;wBAAG;oBAAE;oBAE5D,MAAM,KAAK,gBAAgB,CAAC,gBAAgB,CAAC,MAAM;oBACnD,QAAQ,GAAG,CAAC;gBACd,EAAE,OAAO,UAAU;oBACjB,QAAQ,IAAI,CAAC,+BAA+B;gBAC9C;gBAEA,QAAQ,GAAG,CAAC;YAEd,EAAE,OAAO,KAAc;gBACrB,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,gBAAgB,OAAO,GAAG;gBAE1B,yCAAyC;gBACzC,MAAM,WAAW,iEAAiE,IAAI,CAAC,UAAU,SAAS;gBAC1G,MAAM,QAAQ;gBACd,IAAI,eAAe,MAAM,OAAO,IAAI;gBAEpC,IAAI,UAAU;oBACZ,IAAI,MAAM,OAAO,EAAE,SAAS,gBAAgB,MAAM,OAAO,EAAE,SAAS,YAAY;wBAC9E,eAAe;oBACjB,OAAO,IAAI,MAAM,OAAO,EAAE,SAAS,YAAY,MAAM,OAAO,EAAE,SAAS,aAAa,MAAM,OAAO,EAAE,SAAS,eAAe;wBACzH,eAAe;oBACjB;gBACF;gBAEA,QAAQ;gBACR,mBAAmB,OAAO;YAC5B;QACF;uDAAG;QAAC;QAAM;QAAc;QAAoB;QAAS;KAAgB;IAErE,qBAAqB;IACrB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,MAAM;kEAAqB,CAAC;oBAC1B,EAAE,cAAc;oBAChB,OAAO;gBACT;;YAEA,OAAO,gBAAgB,CAAC,gBAAgB;YACxC;+CAAO;oBACL,OAAO,mBAAmB,CAAC,gBAAgB;oBAC3C,KAAK,UAAU;gBACjB;;QACF;sCAAG;QAAC;KAAK;IAET,OAAO;QAAE;IAAc;AACzB;GA3QgB","debugId":null}},
    {"offset": {"line": 3735, "column": 0}, "map": {"version":3,"sources":["file:///Users/al-husseinabdullah/Desktop/skinior/skiniorai/src/app/%5Blocale%5D/room/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport { Room } from \"livekit-client\";\nimport { LiveKitRoom, RoomAudioRenderer } from \"@livekit/components-react\";\nimport { ConnectionManager } from \"../components/ConnectionManager\";\nimport { InterviewLayout } from \"../components/InterviewLayout\";\nimport { useInterviewState } from \"../hooks/useInterviewState\";\nimport { useRoomConnection } from \"../hooks/useRoomConnection\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface RoomPageProps {\n  params: {\n    id: string;\n    locale: string;\n  };\n}\n\nexport default function RoomPage({ params }: RoomPageProps) {\n  const searchParams = useSearchParams();\n  const [room] = useState(() => new Room());\n  const { user } = useAuth();\n  \n  const {\n    isConnected,\n    isConnecting,\n    error,\n    needsPermission,\n    participantName,\n    companyInfo,\n    jobInfo,\n    handleStartInterview,\n    updateConnectionState,\n    updateError,\n    updateJobData,\n  } = useInterviewState();\n\n  const { connectToRoom } = useRoomConnection({\n    room,\n    searchParams,\n    onConnectionChange: updateConnectionState,\n    onError: updateError,\n    onJobDataUpdate: updateJobData,\n    userId: user?.id,\n    roomId: params.id, // Pass the room ID from URL\n  });\n\n  // Auto-connect when permissions are granted\n  useEffect(() => {\n    if (!needsPermission && !isConnected && !isConnecting && !error) {\n      connectToRoom();\n    }\n  }, [needsPermission, isConnected, isConnecting, error, connectToRoom]);\n\n  // Show connection manager for setup\n  if (needsPermission || error || isConnecting || !isConnected) {\n    return (\n      <ConnectionManager\n        needsPermission={needsPermission}\n        error={error}\n        isConnecting={isConnecting}\n        isConnected={isConnected}\n        onStartInterview={handleStartInterview}\n      />\n    );\n  }\n\n  // Show main interview interface when connected\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 relative overflow-hidden\">\n      <LiveKitRoom room={room}>\n        <InterviewLayout\n          jobInfo={jobInfo}\n          companyInfo={companyInfo}\n          participantName={participantName}\n        />\n        <RoomAudioRenderer />\n      </LiveKitRoom>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAmBe,SAAS,SAAS,EAAE,MAAM,EAAiB;;IACxD,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,CAAC,KAAK,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD;6BAAE,IAAM,IAAI,yKAAA,CAAA,OAAI;;IACtC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IAEvB,MAAM,EACJ,WAAW,EACX,YAAY,EACZ,KAAK,EACL,eAAe,EACf,eAAe,EACf,WAAW,EACX,OAAO,EACP,oBAAoB,EACpB,qBAAqB,EACrB,WAAW,EACX,aAAa,EACd,GAAG,CAAA,GAAA,iKAAA,CAAA,oBAAiB,AAAD;IAEpB,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,iKAAA,CAAA,oBAAiB,AAAD,EAAE;QAC1C;QACA;QACA,oBAAoB;QACpB,SAAS;QACT,iBAAiB;QACjB,QAAQ,MAAM;QACd,QAAQ,OAAO,EAAE;IACnB;IAEA,4CAA4C;IAC5C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;8BAAE;YACR,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,gBAAgB,CAAC,OAAO;gBAC/D;YACF;QACF;6BAAG;QAAC;QAAiB;QAAa;QAAc;QAAO;KAAc;IAErE,oCAAoC;IACpC,IAAI,mBAAmB,SAAS,gBAAgB,CAAC,aAAa;QAC5D,qBACE,6LAAC,uKAAA,CAAA,oBAAiB;YAChB,iBAAiB;YACjB,OAAO;YACP,cAAc;YACd,aAAa;YACb,kBAAkB;;;;;;IAGxB;IAEA,+CAA+C;IAC/C,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,oNAAA,CAAA,cAAW;YAAC,MAAM;;8BACjB,6LAAC,qKAAA,CAAA,kBAAe;oBACd,SAAS;oBACT,aAAa;oBACb,iBAAiB;;;;;;8BAEnB,6LAAC,gOAAA,CAAA,oBAAiB;;;;;;;;;;;;;;;;AAI1B;GA9DwB;;QACD,qIAAA,CAAA,kBAAe;QAEnB,kIAAA,CAAA,UAAO;QAcpB,iKAAA,CAAA,oBAAiB;QAEK,iKAAA,CAAA,oBAAiB;;;KAnBrB","debugId":null}}]
}